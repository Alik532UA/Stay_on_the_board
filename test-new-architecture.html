<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –Ω–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ - Stay on the board</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 2px solid var(--border-color);
            box-shadow: 0 2px 8px var(--shadow-color);
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }
        
        .test-button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 6px;
            background: var(--control-bg);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .test-button:hover {
            background: var(--control-hover);
            color: white;
        }
        
        .test-button.primary {
            background: var(--control-selected);
            color: white;
        }
        
        .test-button.danger {
            background: var(--error-color);
            color: white;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ –¢–µ—Å—Ç –Ω–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏</h1>
        
        <div class="test-section">
            <h3>1. –¢–µ—Å—Ç State Manager</h3>
            <button class="test-button" onclick="testStateManager()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏ State Manager</button>
            <button class="test-button" onclick="testStateSubscriptions()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–∏</button>
            <div id="state-test-result"></div>
        </div>
        
        <div class="test-section">
            <h3>2. –¢–µ—Å—Ç Modal Component</h3>
            <button class="test-button primary" onclick="testModalAlert()">Alert</button>
            <button class="test-button" onclick="testModalConfirm()">Confirm</button>
            <button class="test-button" onclick="testModalCustom()">Custom Modal</button>
            <div id="modal-test-result"></div>
        </div>
        
        <div class="test-section">
            <h3>3. –¢–µ—Å—Ç View Manager</h3>
            <button class="test-button" onclick="testViewNavigation()">–ù–∞–≤—ñ–≥–∞—Ü—ñ—è</button>
            <button class="test-button" onclick="testViewComponents()">–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏</button>
            <div id="view-test-result"></div>
        </div>
        
        <div class="test-section">
            <h3>4. –¢–µ—Å—Ç DOM Utils</h3>
            <button class="test-button" onclick="testDOMUtils()">DOM —É—Ç–∏–ª—ñ—Ç–∏</button>
            <button class="test-button" onclick="testAnimations()">–ê–Ω—ñ–º–∞—Ü—ñ—ó</button>
            <div id="dom-test-result"></div>
        </div>
        
        <div class="test-section">
            <h3>5. –¢–µ—Å—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤</h3>
            <div id="components-test-area">
                <div id="game-board-test"></div>
                <div id="game-controls-test"></div>
            </div>
            <button class="test-button" onclick="testGameComponents()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏ —ñ–≥—Ä–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏</button>
        </div>
        
        <div class="test-section">
            <h3>6. –¢–µ—Å—Ç –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å</h3>
            <button class="test-button" onclick="testSettings()">–ó–º—ñ–Ω–∏—Ç–∏ –º–æ–≤—É</button>
            <button class="test-button" onclick="testTheme()">–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É</button>
            <div id="settings-test-result"></div>
        </div>
        
        <div class="test-section">
            <h3>7. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤</h3>
            <div id="test-results"></div>
        </div>
    </div>

    <script type="module">
        // –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –Ω–æ–≤—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É
        import { stateManager } from './js/state-manager.js';
        import { ViewManager } from './js/view-manager.js';
        import { ModalComponent } from './js/components/modal-component.js';
        import { GameBoardComponent } from './js/components/game-board-component.js';
        import { GameControlsComponent } from './js/components/game-controls-component.js';
        import { DOMUtils } from './js/utils/dom-utils.js';
        
        // –†–æ–±–∏–º–æ –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ –¥–ª—è —Ç–µ—Å—Ç—ñ–≤
        window.stateManager = stateManager;
        window.ViewManager = ViewManager;
        window.ModalComponent = ModalComponent;
        window.GameBoardComponent = GameBoardComponent;
        window.GameControlsComponent = GameControlsComponent;
        window.DOMUtils = DOMUtils;
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –ø–µ—Ä–µ–∫–ª–∞–¥–∏
        import uk from './lang/uk.js';
        window.translationsAll = { uk };
        window.translations = uk;
        
        // –§—É–Ω–∫—Ü—ñ—ó —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
        window.testStateManager = function() {
            const result = document.getElementById('state-test-result');
            
            // –¢–µ—Å—Ç—É—î–º–æ –±–∞–∑–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
            stateManager.setState('test.value', 42);
            const value = stateManager.getState('test.value');
            
            stateManager.updateSettings({ language: 'uk' });
            const settings = stateManager.getState('settings');
            
            result.innerHTML = `
                <p>‚úÖ State Manager –ø—Ä–∞—Ü—é—î</p>
                <p>–¢–µ—Å—Ç–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è: ${value}</p>
                <p>–ú–æ–≤–∞: ${settings.language}</p>
            `;
        };
        
        window.testStateSubscriptions = function() {
            const result = document.getElementById('state-test-result');
            
            // –ü—ñ–¥–ø–∏—Å—É—î–º–æ—Å—è –Ω–∞ –∑–º—ñ–Ω–∏
            const unsubscribe = stateManager.subscribe('test.value', (newValue, oldValue) => {
                result.innerHTML += `<p>üì° –ó–º—ñ–Ω–∞: ${oldValue} ‚Üí ${newValue}</p>`;
            });
            
            // –ó–º—ñ–Ω—é—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è
            stateManager.setState('test.value', 100);
            
            setTimeout(() => {
                unsubscribe();
                result.innerHTML += '<p>‚úÖ –ü—ñ–¥–ø–∏—Å–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å</p>';
            }, 100);
        };
        
        window.testModalAlert = async function() {
            try {
                await ModalComponent.alert('–¢–µ—Å—Ç', '–¶–µ —Ç–µ—Å—Ç–æ–≤–∏–π alert!');
                document.getElementById('modal-test-result').innerHTML = '<p>‚úÖ Alert –ø—Ä–∞—Ü—é—î</p>';
            } catch (error) {
                document.getElementById('modal-test-result').innerHTML = `<p>‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}</p>`;
            }
        };
        
        window.testModalConfirm = async function() {
            try {
                const result = await ModalComponent.confirm(
                    '–¢–µ—Å—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è',
                    '–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ?',
                    () => console.log('–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ'),
                    () => console.log('–°–∫–∞—Å–æ–≤–∞–Ω–æ')
                );
                document.getElementById('modal-test-result').innerHTML = '<p>‚úÖ Confirm –ø—Ä–∞—Ü—é—î</p>';
            } catch (error) {
                document.getElementById('modal-test-result').innerHTML = `<p>‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}</p>`;
            }
        };
        
        window.testModalCustom = function() {
            stateManager.showModal(
                '–ö–∞—Å—Ç–æ–º–Ω–∏–π –º–æ–¥–∞–ª',
                '<p>–¶–µ –∫–∞—Å—Ç–æ–º–Ω–∏–π –º–æ–¥–∞–ª –∑ HTML –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</p><ul><li>–ü—É–Ω–∫—Ç 1</li><li>–ü—É–Ω–∫—Ç 2</li></ul>',
                [
                    { text: 'OK', primary: true },
                    { text: 'Cancel' }
                ]
            );
            document.getElementById('modal-test-result').innerHTML = '<p>‚úÖ –ö–∞—Å—Ç–æ–º–Ω–∏–π –º–æ–¥–∞–ª –ø—Ä–∞—Ü—é—î</p>';
        };
        
        window.testViewNavigation = function() {
            const result = document.getElementById('view-test-result');
            const viewManager = new ViewManager();
            
            try {
                // –¢–µ—Å—Ç—É—î–º–æ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—é
                viewManager.showView('mainMenu');
                result.innerHTML = '<p>‚úÖ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î</p>';
            } catch (error) {
                result.innerHTML = `<p>‚ùå –ü–æ–º–∏–ª–∫–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó: ${error.message}</p>`;
            }
        };
        
        window.testViewComponents = function() {
            const result = document.getElementById('view-test-result');
            
            try {
                // –¢–µ—Å—Ç—É—î–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
                const gameBoard = new GameBoardComponent();
                const gameControls = new GameControlsComponent();
                
                result.innerHTML = '<p>‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —É—Å–ø—ñ—à–Ω–æ</p>';
            } catch (error) {
                result.innerHTML = `<p>‚ùå –ü–æ–º–∏–ª–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤: ${error.message}</p>`;
            }
        };
        
        window.testDOMUtils = function() {
            const result = document.getElementById('dom-test-result');
            
            try {
                // –¢–µ—Å—Ç—É—î–º–æ DOM —É—Ç–∏–ª—ñ—Ç–∏
                const testElement = document.createElement('div');
                testElement.id = 'test-element';
                testElement.textContent = '–¢–µ—Å—Ç–æ–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç';
                document.body.appendChild(testElement);
                
                DOMUtils.addClass(testElement, 'test-class');
                DOMUtils.setTextContent(testElement, '–û–Ω–æ–≤–ª–µ–Ω–∏–π —Ç–µ–∫—Å—Ç');
                
                const hasClass = DOMUtils.hasClass(testElement, 'test-class');
                const text = DOMUtils.getTextContent(testElement);
                
                document.body.removeChild(testElement);
                
                result.innerHTML = `
                    <p>‚úÖ DOM —É—Ç–∏–ª—ñ—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å</p>
                    <p>–ö–ª–∞—Å –¥–æ–¥–∞–Ω–æ: ${hasClass}</p>
                    <p>–¢–µ–∫—Å—Ç: ${text}</p>
                `;
            } catch (error) {
                result.innerHTML = `<p>‚ùå –ü–æ–º–∏–ª–∫–∞ DOM —É—Ç–∏–ª—ñ—Ç: ${error.message}</p>`;
            }
        };
        
        window.testAnimations = async function() {
            const result = document.getElementById('dom-test-result');
            
            try {
                const testElement = document.createElement('div');
                testElement.id = 'animation-test';
                testElement.style.cssText = 'width: 100px; height: 100px; background: red; margin: 10px;';
                document.body.appendChild(testElement);
                
                // –¢–µ—Å—Ç—É—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—ó
                await DOMUtils.fadeIn(testElement);
                await DOMUtils.bounce(testElement);
                await DOMUtils.fadeOut(testElement);
                
                document.body.removeChild(testElement);
                
                result.innerHTML = '<p>‚úÖ –ê–Ω—ñ–º–∞—Ü—ñ—ó –ø—Ä–∞—Ü—é—é—Ç—å</p>';
            } catch (error) {
                result.innerHTML = `<p>‚ùå –ü–æ–º–∏–ª–∫–∞ –∞–Ω—ñ–º–∞—Ü—ñ–π: ${error.message}</p>`;
            }
        };
        
        window.testGameComponents = function() {
            const result = document.getElementById('components-test-area');
            
            try {
                // –°—Ç–≤–æ—Ä—é—î–º–æ —Ç–µ—Å—Ç–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
                const gameBoard = new GameBoardComponent();
                const gameControls = new GameControlsComponent();
                
                // –†–µ–Ω–¥–µ—Ä–∏–º–æ —ó—Ö
                gameBoard.render();
                gameControls.render();
                
                result.innerHTML = `
                    <div id="game-board-test">
                        <h4>–Ü–≥—Ä–æ–≤–∞ –¥–æ—à–∫–∞:</h4>
                        ${gameBoard.element.outerHTML}
                    </div>
                    <div id="game-controls-test">
                        <h4>–ö–æ–Ω—Ç—Ä–æ–ª–∏ –≥—Ä–∏:</h4>
                        ${gameControls.element.outerHTML}
                    </div>
                    <p>‚úÖ –Ü–≥—Ä–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å</p>
                `;
            } catch (error) {
                result.innerHTML = `<p>‚ùå –ü–æ–º–∏–ª–∫–∞ —ñ–≥—Ä–æ–≤–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤: ${error.message}</p>`;
            }
        };
        
        window.testSettings = function() {
            const result = document.getElementById('settings-test-result');
            
            try {
                // –¢–µ—Å—Ç—É—î–º–æ –∑–º—ñ–Ω—É –º–æ–≤–∏
                const currentLang = stateManager.getState('settings.language');
                const newLang = currentLang === 'uk' ? 'en' : 'uk';
                
                stateManager.setState('settings.language', newLang);
                
                result.innerHTML = `
                    <p>‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—é—Ç—å</p>
                    <p>–ú–æ–≤–∞ –∑–º—ñ–Ω–µ–Ω–∞: ${currentLang} ‚Üí ${newLang}</p>
                `;
            } catch (error) {
                result.innerHTML = `<p>‚ùå –ü–æ–º–∏–ª–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å: ${error.message}</p>`;
            }
        };
        
        window.testTheme = function() {
            const result = document.getElementById('settings-test-result');
            
            try {
                // –¢–µ—Å—Ç—É—î–º–æ –∑–º—ñ–Ω—É —Ç–µ–º–∏
                const currentTheme = stateManager.getState('settings.theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                stateManager.setState('settings.theme', newTheme);
                
                result.innerHTML = `
                    <p>‚úÖ –¢–µ–º–∞ –ø—Ä–∞—Ü—é—î</p>
                    <p>–¢–µ–º–∞ –∑–º—ñ–Ω–µ–Ω–∞: ${currentTheme} ‚Üí ${newTheme}</p>
                `;
            } catch (error) {
                result.innerHTML = `<p>‚ùå –ü–æ–º–∏–ª–∫–∞ —Ç–µ–º–∏: ${error.message}</p>`;
            }
        };
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.addEventListener('load', function() {
            console.log('üß™ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤...');
            
            // –ó–∞–ø—É—Å–∫–∞—î–º–æ –±–∞–∑–æ–≤—ñ —Ç–µ—Å—Ç–∏
            setTimeout(() => testStateManager(), 100);
            setTimeout(() => testDOMUtils(), 200);
            setTimeout(() => testSettings(), 300);
            
            // –ü–æ–∫–∞–∑—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
            setTimeout(() => {
                const results = document.getElementById('test-results');
                results.innerHTML = `
                    <h4>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤:</h4>
                    <p>‚úÖ State Manager: –ü—Ä–∞—Ü—é—î</p>
                    <p>‚úÖ DOM Utils: –ü—Ä–∞—Ü—é—î</p>
                    <p>‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è: –ü—Ä–∞—Ü—é—é—Ç—å</p>
                    <p>‚úÖ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!</p>
                `;
            }, 500);
        });
    </script>
</body>
</html> 