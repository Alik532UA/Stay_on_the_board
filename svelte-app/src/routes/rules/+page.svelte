<script>
  import FloatingCloseButton from '$lib/components/FloatingCloseButton.svelte';
</script>

<FloatingCloseButton />

<h1>Правила гри "Stay on the Board"</h1>

<h2>Мета гри</h2>
<p>
  <b>"Stay on the Board"</b> — це стратегічна гра на витривалість. Ваша мета — якомога довше утримувати фігуру на дошці, роблячи ходи по черзі з суперником та змушуючи його зробити помилку.
</p>

<h2>Процес ходу</h2>
<p>
  Гравець робить хід, використовуючи панель керування під дошкою. Натискання на клітинки дошки не виконує ходів.
</p>
<ol>
  <li><b>Крок 1: Виберіть напрямок.</b> Натисніть одну з 8 кнопок-стрілок, що відповідають напрямкам руху:
    <div class="directions-grid-visual">
      <div class="dir-btn-visual">↖</div>
      <div class="dir-btn-visual">↑</div>
      <div class="dir-btn-visual">↗</div>
      <div class="dir-btn-visual">←</div>
      <div class="dir-btn-visual center-piece">♛</div>
      <div class="dir-btn-visual">→</div>
      <div class="dir-btn-visual">↙</div>
      <div class="dir-btn-visual">↓</div>
      <div class="dir-btn-visual">↘</div>
    </div>
  </li>
  <li><b>Крок 2: Виберіть відстань.</b> Натисніть кнопку з цифрою, що вказує, на скільки клітинок перемістити фігуру. Максимальна відстань залежить від розміру дошки (N-1).</li>
  <li><b>Крок 3: Підтвердіть хід.</b> Натисніть велику зелену кнопку, щоб завершити свій хід.</li>
</ol>

<h2>Умови перемоги та поразки</h2>
<h3>Ви програєте, якщо:</h3>
<ul>
  <li>Ваш хід виводить фігуру за межі дошки.</li>
  <li>Ви намагаєтесь стати на вже заблоковану клітинку (у відповідному режимі).</li>
  <li>Ви натискаєте кнопку "Немає ходів", але насправді у вас ще є доступні варіанти ходу.</li>
</ul>
<h3>Ви перемагаєте, якщо:</h3>
<ul>
  <li>Ваш суперник робить один із вищезгаданих помилкових ходів.</li>
  <li>Ви натискаєте "Немає ходів", і система підтверджує, що доступних ходів дійсно немає.</li>
</ul>

<h2>Режими гри</h2>
<h3>Звичайний режим</h3>
<p>
  Це базовий режим, ідеальний для початківців. Усі клітинки залишаються доступними протягом гри. Гра закінчується, лише коли один із гравців виводить фігуру за межі дошки.
</p>
<h3>Режим заблокованих клітинок</h3>
<p>
  Більш складний та стратегічний режим. Клітинка, <strong>з якої</strong> було зроблено хід, стає заблокованою і недоступною для подальших ходів. Це змушує гравців ретельно планувати свій маршрут.
</p>

<h2>Кнопка "Немає ходів"</h2>
<p>
  Якщо ви вважаєте, що у фігури не залишилося жодного валідного ходу, ви можете натиснути цю кнопку. Система перевірить вашу заяву:
</p>
<ul>
  <li><b>Якщо ви маєте рацію</b> (ходів дійсно немає) — ви перемагаєте.</li>
  <li><b>Якщо ви помилилися</b> (хоча б один хід є) — ви програєте.</li>
</ul>
<p>Це ризикована, але іноді необхідна стратегія для перемоги в складній ситуації.</p>

<h2>Система очок</h2>
<p>
  За кожен успішно зроблений хід ви отримуєте <strong>1 очко</strong>. Чим довше триває гра, тим більший ваш рахунок. Рахунок відображається в реальному часі та фіксується наприкінці гри.
</p>

<h2>Налаштування гри</h2>
<h3>Розмір дошки</h3>
<p>
  Ви можете змінювати розмір ігрового поля від <strong>2x2</strong> до <strong>9x9</strong>.
</p>

<style>
  .directions-grid-visual {
    display: grid;
    grid-template-columns: repeat(3, 60px);
    grid-template-rows: repeat(3, 60px);
    gap: 10px;
    justify-content: center;
    margin: 1.5em 0;
    font-family: 'M PLUS Rounded 1c', sans-serif;
  }

  .dir-btn-visual {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8em;
    border-radius: 12px;
    background: var(--control-bg, #f0e8f2);
    color: var(--text-primary, #442c2e);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    border: 1px solid var(--border-color, rgba(233, 84, 32, 0.5));
  }

  .dir-btn-visual.center-piece {
    font-size: 2.2em;
    background: var(--cell-dark, #e4d5c6);
    color: var(--piece-color, #3a2a22);
    border: none;
  }
</style> 