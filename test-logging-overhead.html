<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ª–æ–≥—É–≤–∞–Ω–Ω—è - Stay on the Board</title>
    <link rel="stylesheet" href="css/main.css">
    <style>
        .test-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            z-index: 9999;
            max-width: 300px;
        }
        .log-counter {
            margin: 5px 0;
            padding: 5px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
        }
        .test-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #45a049;
        }
        .clear-button {
            background: #f44336;
        }
        .clear-button:hover {
            background: #da190b;
        }
    </style>
</head>
<body>
    <div class="test-panel">
        <h4>üß™ –¢–µ—Å—Ç –ª–æ–≥—É–≤–∞–Ω–Ω—è</h4>
        <div class="log-counter">
            <strong>–õ–æ–≥–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ:</strong> <span id="load-logs">0</span>
        </div>
        <div class="log-counter">
            <strong>–õ–æ–≥–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –≤ –≥—Ä—É:</strong> <span id="game-logs">0</span>
        </div>
        <div class="log-counter">
            <strong>–í—Å—å–æ–≥–æ –ª–æ–≥—ñ–≤:</strong> <span id="total-logs">0</span>
        </div>
        <button class="test-button" onclick="startLoggingTest()">–ü–æ—á–∞—Ç–∏ —Ç–µ—Å—Ç</button>
        <button class="test-button clear-button" onclick="clearLogs()">–û—á–∏—Å—Ç–∏—Ç–∏</button>
        <button class="test-button" onclick="showLogDetails()">–î–µ—Ç–∞–ª—ñ –ª–æ–≥—ñ–≤</button>
        <button class="test-button" onclick="testOptimization()">–¢–µ—Å—Ç –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó</button>
        <button class="test-button" onclick="applyOptimization()">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é</button>
    </div>

    <!-- –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ –æ—Å–Ω–æ–≤–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ -->
    <script src="js/utils/logger.js"></script>
    <script src="js/utils/logging-optimizer.js"></script>
    <script src="js/event-bus.js"></script>
    <script src="js/state-manager.js"></script>
    <script src="js/utils/dom-utils.js"></script>
    <script src="js/utils/cache-manager.js"></script>
    <script src="js/utils/validator.js"></script>
    <script src="js/utils/analytics.js"></script>
    <script src="js/speech.js"></script>
    <script src="js/network.js"></script>
    <script src="js/webrtc-manager.js"></script>
    <script src="js/view-manager.js"></script>
    <script src="js/game-core.js"></script>
    <script src="js/game-logic-new.js"></script>
    <script src="js/components/base-component.js"></script>
    <script src="js/components/modal-component.js"></script>
    <script src="js/components/main-menu-component.js"></script>
    <script src="js/components/local-game-component.js"></script>
    <script src="js/components/game-board-component.js"></script>
    <script src="js/components/game-controls-component.js"></script>
    <script src="js/components/settings-component.js"></script>
    <script src="js/components/online-menu-component.js"></script>
    <script src="js/components/join-room-component.js"></script>
    <script src="js/components/waiting-for-player-component.js"></script>
    <script src="js/main-new.js"></script>

    <script>
        // –¢–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è
        let loadLogCount = 0;
        let gameLogCount = 0;
        let totalLogCount = 0;
        let originalConsoleLog = console.log;
        let originalConsoleInfo = console.info;
        let originalConsoleWarn = console.warn;
        let originalConsoleError = console.error;
        let originalConsoleDebug = console.debug;

        // –ü–µ—Ä–µ—Ö–æ–ø–ª—é—î–º–æ –≤—Å—ñ –ª–æ–≥–∏
        function interceptLogs() {
            console.log = function(...args) {
                totalLogCount++;
                updateLogCounters();
                originalConsoleLog.apply(console, args);
            };
            
            console.info = function(...args) {
                totalLogCount++;
                updateLogCounters();
                originalConsoleInfo.apply(console, args);
            };
            
            console.warn = function(...args) {
                totalLogCount++;
                updateLogCounters();
                originalConsoleWarn.apply(console, args);
            };
            
            console.error = function(...args) {
                totalLogCount++;
                updateLogCounters();
                originalConsoleError.apply(console, args);
            };
            
            console.debug = function(...args) {
                totalLogCount++;
                updateLogCounters();
                originalConsoleDebug.apply(console, args);
            };
        }

        function updateLogCounters() {
            document.getElementById('load-logs').textContent = loadLogCount;
            document.getElementById('game-logs').textContent = gameLogCount;
            document.getElementById('total-logs').textContent = totalLogCount;
        }

        function startLoggingTest() {
            // –°–∫–∏–¥–∞—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫–∏
            loadLogCount = 0;
            gameLogCount = 0;
            totalLogCount = 0;
            updateLogCounters();

            // –í–∫–ª—é—á–∞—î–º–æ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–≤
            interceptLogs();

            // –ó–∞–ø—É—Å–∫–∞—î–º–æ –¥–æ–¥–∞—Ç–æ–∫
            console.log('üß™ –ü–æ—á–∞—Ç–æ–∫ —Ç–µ—Å—Ç—É –ª–æ–≥—É–≤–∞–Ω–Ω—è...');
            
            // –Ü–º—ñ—Ç—É—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
            setTimeout(() => {
                loadLogCount = totalLogCount;
                updateLogCounters();
                console.log('üìä –õ–æ–≥–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ:', loadLogCount);
                
                // –Ü–º—ñ—Ç—É—î–º–æ –ø–µ—Ä–µ—Ö—ñ–¥ –≤ –≥—Ä—É –∑ –∫–æ–º–ø'—é—Ç–µ—Ä–æ–º
                setTimeout(() => {
                    const currentTotal = totalLogCount;
                    gameLogCount = currentTotal - loadLogCount;
                    updateLogCounters();
                    console.log('üéÆ –õ–æ–≥–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –≤ –≥—Ä—É:', gameLogCount);
                    console.log('üìä –í—Å—å–æ–≥–æ –ª–æ–≥—ñ–≤:', totalLogCount);
                    
                    // –ê–Ω–∞–ª—ñ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
                    analyzeResults();
                }, 1000);
            }, 1000);
        }

        function analyzeResults() {
            console.log('\nüìã –ê–ù–ê–õ–Ü–ó –†–ï–ó–£–õ–¨–¢–ê–¢–Ü–í:');
            console.log('='.repeat(50));
            
            if (loadLogCount > 50) {
                console.warn('‚ö†Ô∏è –ó–∞–±–∞–≥–∞—Ç–æ –ª–æ–≥—ñ–≤ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ:', loadLogCount);
            } else {
                console.log('‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ª–æ–≥—ñ–≤ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ:', loadLogCount);
            }
            
            if (gameLogCount > 30) {
                console.warn('‚ö†Ô∏è –ó–∞–±–∞–≥–∞—Ç–æ –ª–æ–≥—ñ–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –≤ –≥—Ä—É:', gameLogCount);
            } else {
                console.log('‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ª–æ–≥—ñ–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –≤ –≥—Ä—É:', gameLogCount);
            }
            
            if (totalLogCount > 100) {
                console.warn('‚ö†Ô∏è –ó–∞–≥–∞–ª–æ–º –∑–∞–±–∞–≥–∞—Ç–æ –ª–æ–≥—ñ–≤:', totalLogCount);
            } else {
                console.log('‚úÖ –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ª–æ–≥—ñ–≤ –≤ –Ω–æ—Ä–º—ñ:', totalLogCount);
            }
            
            console.log('='.repeat(50));
        }

        function clearLogs() {
            loadLogCount = 0;
            gameLogCount = 0;
            totalLogCount = 0;
            updateLogCounters();
            console.clear();
            console.log('üßπ –õ–æ–≥–∏ –æ—á–∏—â–µ–Ω–æ');
        }

        function showLogDetails() {
            console.log('\nüìä –î–ï–¢–ê–õ–¨–ù–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ê –õ–û–ì–Ü–í:');
            console.log('='.repeat(50));
            console.log('–õ–æ–≥–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ:', loadLogCount);
            console.log('–õ–æ–≥–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –≤ –≥—Ä—É:', gameLogCount);
            console.log('–í—Å—å–æ–≥–æ –ª–æ–≥—ñ–≤:', totalLogCount);
            
            if (window.Logger) {
                const loggerStats = Logger.getStats();
                console.log('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Logger:', loggerStats);
            }
            
            console.log('='.repeat(50));
        }

        function testOptimization() {
            console.log('\nüîß –¢–ï–°–¢ –û–ü–¢–ò–ú–Ü–ó–ê–¶–Ü–á –õ–û–ì–£–í–ê–ù–ù–Ø:');
            console.log('='.repeat(50));
            
            if (window.LoggingOptimizer) {
                const analysis = LoggingOptimizer.analyzeLogging();
                console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª—ñ–∑—É:', analysis);
                
                if (analysis.recommendations.length > 0) {
                    console.log('\nüìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á:');
                    analysis.recommendations.forEach((rec, index) => {
                        console.log(`${index + 1}. ${rec}`);
                    });
                } else {
                    console.log('‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤ –Ω–æ—Ä–º—ñ, –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞');
                }
            } else {
                console.error('‚ùå LoggingOptimizer –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');
            }
            
            console.log('='.repeat(50));
        }

        function applyOptimization() {
            console.log('\n‚ö° –ó–ê–°–¢–û–°–£–í–ê–ù–ù–Ø –û–ü–¢–ò–ú–Ü–ó–ê–¶–Ü–á:');
            console.log('='.repeat(50));
            
            if (window.LoggingOptimizer && window.Logger) {
                // –ê–Ω–∞–ª—ñ–∑—É—î–º–æ –ø–æ—Ç–æ—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
                const analysis = LoggingOptimizer.analyzeLogging();
                
                if (analysis.recommendations.length > 0) {
                    // –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
                    LoggingOptimizer.applyRecommendations(analysis.recommendations);
                    
                    // –û–ø—Ç–∏–º—ñ–∑—É—î–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
                    LoggingOptimizer.optimizeAllComponents();
                    
                    console.log('‚úÖ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–∞');
                    console.log('üìä –ù–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Logger:', Logger.config);
                } else {
                    console.log('‚ÑπÔ∏è –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞');
                }
            } else {
                console.error('‚ùå LoggingOptimizer –∞–±–æ Logger –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');
            }
            
            console.log('='.repeat(50));
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î–º–æ —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.addEventListener('load', () => {
            setTimeout(() => {
                console.log('üß™ –¢–µ—Å—Ç –ª–æ–≥—É–≤–∞–Ω–Ω—è –≥–æ—Ç–æ–≤–∏–π –¥–æ –∑–∞–ø—É—Å–∫—É');
                console.log('–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü–æ—á–∞—Ç–∏ —Ç–µ—Å—Ç" –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏');
            }, 2000);
        });
    </script>
</body>
</html> 