# üìÅ Services (`/lib/services`)

–¶–µ–π –∫–∞—Ç–∞–ª–æ–≥ –º—ñ—Å—Ç–∏—Ç—å **—Å–µ—Ä–≤—ñ—Å–∏** ‚Äî –º–æ–¥—É–ª—ñ, —â–æ —ñ–Ω–∫–∞–ø—Å—É–ª—é—é—Ç—å –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É, –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ —Ç–∞ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –¥–∞–Ω–∏–º–∏. –°–µ—Ä–≤—ñ—Å–∏ —î –ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫–∞–º–∏ –º—ñ–∂ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Ç–∞ —Å—Ç–æ—Ä–∞–º–∏.

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∞ —Ä–æ–ª—å

```mermaid
graph LR
    UI[UI Components] --> Services
    Services --> Stores
    Services --> GameModes
    Services --> ExternalAPIs[Browser APIs]
```

## üìù –ö–æ–Ω–≤–µ–Ω—Ü—ñ—ó

1. **–Ü–º–µ–Ω—É–≤–∞–Ω–Ω—è**: `<–Ω–∞–∑–≤–∞>Service.ts` (–Ω–∞–ø—Ä. `gameService.ts`)
2. **–ï–∫—Å–ø–æ—Ä—Ç**: –ö–æ–∂–µ–Ω —Å–µ—Ä–≤—ñ—Å –µ–∫—Å–ø–æ—Ä—Ç—É—î –æ–±'—î–∫—Ç –∑ –º–µ—Ç–æ–¥–∞–º–∏ (`export const xyzService = { ... }`)
3. **–ë–µ–∑ —Å—Ç–∞–Ω—É**: –°–µ—Ä–≤—ñ—Å–∏ –ù–ï –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å —Å—Ç–∞–Ω ‚Äî –≤–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∑—ñ —Å—Ç–æ—Ä–∞–º–∏
4. **–ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏**: –Ü–∑–æ–ª—å–æ–≤–∞–Ω—ñ —á–µ—Ä–µ–∑ `sideEffectService.ts`
5. **–õ–æ–≥—É–≤–∞–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `logService` –∑–∞–º—ñ—Å—Ç—å `console.log`

## üìö –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Å–µ—Ä–≤—ñ—Å—ñ–≤

### –Ü–≥—Ä–æ–≤–∞ –ª–æ–≥—ñ–∫–∞
| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:-----|:------------|
| `gameService.ts` | –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–æ–≤–æ—ó –≥—Ä–∏ |
| `gameLogicService.ts` | –ß–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—è `performMove()` –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —Ö–æ–¥—ñ–≤ |
| `gameModeService.ts` | –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–∏–º —Ä–µ–∂–∏–º–æ–º –≥—Ä–∏ |
| `scoreService.ts` | –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –±–∞–ª—ñ–≤ —Ç–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–µ—Ä–µ–º–æ–∂—Ü—è |
| `endGameService.ts` | –õ–æ–≥—ñ–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—Ä–∏ |
| `noMovesService.ts` | –û–±—Ä–æ–±–∫–∞ —Å–∏—Ç—É–∞—Ü—ñ—ó "–Ω–µ–º–∞—î —Ö–æ–¥—ñ–≤" |
| `availableMovesService.ts` | –û–±—á–∏—Å–ª–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ö–æ–¥—ñ–≤ |

### UI —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—è
| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:-----|:------------|
| `userActionService.ts` | –û–±—Ä–æ–±–∫–∞ –¥—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–≤–∏–±—ñ—Ä –Ω–∞–ø—Ä—è–º–∫—É, —Ä–µ—Å—Ç–∞—Ä—Ç) |
| `modalService.ts` | –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω (GameOver, –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è) |
| `hotkeyService.ts` | –ì–ª–æ–±–∞–ª—å–Ω—ñ –≥–∞—Ä—è—á—ñ –∫–ª–∞–≤—ñ—à—ñ |
| `gameHotkeyService.ts` | –ì–∞—Ä—è—á—ñ –∫–ª–∞–≤—ñ—à—ñ –ø—ñ–¥ —á–∞—Å –≥—Ä–∏ |
| `navigationService.ts` | –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –º—ñ–∂ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏ |
| `uiService.ts` | –£—Ç–∏–ª—ñ—Ç–∏ UI |

### –í—ñ–∑—É–∞–ª—å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏
| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:-----|:------------|
| `animationService.ts` | –ß–µ—Ä–≥–∞ –∞–Ω—ñ–º–∞—Ü—ñ–π —Ä—É—Ö—É —Ñ—ñ—à–∫–∏ |
| `speechService.ts` | Text-to-Speech –¥–ª—è –æ–∑–≤—É—á–µ–Ω–Ω—è —Ö–æ–¥—ñ–≤ |
| `audioService.ts` | –ó–≤—É–∫–æ–≤—ñ –µ—Ñ–µ–∫—Ç–∏ |

### –ì–æ–ª–æ—Å–æ–≤–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è
| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:-----|:------------|
| `voiceControlService.ts` | –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –≥–æ–ª–æ—Å–æ–≤–∏—Ö –∫–æ–º–∞–Ω–¥ |

### –Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:-----|:------------|
| `logService.ts` | –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑ –≥—Ä—É–ø–∞–º–∏ |
| `gameEventBus.ts` | –®–∏–Ω–∞ –ø–æ–¥—ñ–π –¥–ª—è –¥–µ–∫–∞–ø–ª—ñ–Ω–≥—É (GameOver, Replay) |
| `sideEffectService.ts` | –Ü–∑–æ–ª—è—Ü—ñ—è –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤ |
| `timeService.ts` | –¢–∞–π–º–µ—Ä–∏ –≥—Ä–∏ —Ç–∞ —Ö–æ–¥—É |
| `testModeService.ts` | –°–µ—Ä–≤—ñ—Å –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º—É |
| `SettingsPersistenceService.ts` | –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –≤ localStorage |

### –ó–æ–≤–Ω—ñ—à–Ω—ñ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:-----|:------------|
| `firebaseService.ts` | –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Firebase (–¥–ª—è –æ–Ω–ª–∞–π–Ω-—Ä–µ–∂–∏–º—É) |
| `serverSyncService.ts` | –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ —Å–µ—Ä–≤–µ—Ä–æ–º |

### –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥–æ—Ä–æ–¥
| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:-----|:------------|
| `rewardsService.ts` | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—è–≥–Ω–µ–Ω—å |

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∞–≤–∏–ª–∞

> [!CAUTION]
> **–ó–æ–ª–æ—Ç–µ –ø—Ä–∞–≤–∏–ª–æ:** –°–µ—Ä–≤—ñ—Å–∏, —â–æ –ø—Ä–∞—Ü—é—é—Ç—å –∑ –ª–æ–≥—ñ–∫–æ—é –≥—Ä–∏, –ù–ï –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –≤—ñ–∑—É–∞–ª—å–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ (`game-board`, –∞–Ω—ñ–º–∞—Ü—ñ–π).

> [!IMPORTANT]
> - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `gameEventBus` –¥–ª—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –º—ñ–∂ –Ω–µ–∑–≤'—è–∑–∞–Ω–∏–º–∏ –º–æ–¥—É–ª—è–º–∏
> - –ù–µ –≤–∏–∫–ª–∏–∫–∞–π—Ç–µ `store.update()` –Ω–∞–ø—Ä—è–º—É –∑ —Å–µ—Ä–≤—ñ—Å—ñ–≤ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º–µ—Ç–æ–¥–∏ —Å—Ç–æ—Ä—ñ–≤
> - –í—Å—ñ –ø—É–±–ª—ñ—á–Ω—ñ –º–µ—Ç–æ–¥–∏ –º–∞—é—Ç—å –±—É—Ç–∏ —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω—ñ

## üîó –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

- –°–µ—Ä–≤—ñ—Å–∏ –º–æ–∂—É—Ç—å —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏:
  - –Ü–Ω—à—ñ —Å–µ—Ä–≤—ñ—Å–∏
  - –°—Ç–æ—Ä–∏ (`$lib/stores/*`)
  - –£—Ç–∏–ª—ñ—Ç–∏ (`$lib/utils/*`)
  - –¢–∏–ø–∏ (`$lib/types/*`, `$lib/models/*`)
- –°–µ—Ä–≤—ñ—Å–∏ –ù–ï –ø–æ–≤–∏–Ω–Ω—ñ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏:
  - Svelte-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
  - CSS-—Ñ–∞–π–ª–∏
