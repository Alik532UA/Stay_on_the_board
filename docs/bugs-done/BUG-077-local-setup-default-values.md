---
status: done
---

# BUG-077: Зміна значень за замовчуванням в /local-setup

## Опис проблеми

**Шлях:** `/local-setup`

**Актуальний результат:** 
- Кількість гравців: 2
- Розмір дошки: 4x4
- "Режим заблокованих клітинок": on
- "Автоматично приховувати дошку": on
- "Заборонити зміни під час гри": on

**Очікуваний результат:**
- Кількість гравців: 4
- Розмір дошки: 4x4
- "Режим заблокованих клітинок": off
- "Автоматично приховувати дошку": off
- "Заборонити зміни під час гри": off

## Аналіз проблеми

### Причина
Поточні значення за замовчуванням в `localGameStore` не відповідають бажаним налаштуванням для локальних ігор.

### Додаткова проблема
Користувачі повинні мати можливість швидко почати гру з оптимальними налаштуваннями без необхідності змінювати кожен параметр вручну.

## Рішення

### 1. Оновлення значень за замовчуванням в localGameStore
Змінено функцію `createInitialState` в `src/lib/stores/localGameStore.js`:

```javascript
const createInitialState = () => {
  const player1Color = getRandomColor();
  const player2Color = getRandomUnusedColor([player1Color]);
  const player3Color = getRandomUnusedColor([player1Color, player2Color]);
  const player4Color = getRandomUnusedColor([player1Color, player2Color, player3Color]);
  
  return {
    players: [
      { id: generateId(), name: 'Гравець 1', color: player1Color, score: 0 },
      { id: generateId(), name: 'Гравець 2', color: player2Color, score: 0 },
      { id: generateId(), name: 'Гравець 3', color: player3Color, score: 0 },
      { id: generateId(), name: 'Гравець 4', color: player4Color, score: 0 }
    ],
    settings: {
      boardSize: 4,
      blockModeEnabled: false,
      autoHideBoard: false,
      lockSettings: false
    }
  };
};
```

### 2. Обґрунтування змін
- **4 гравці**: Оптимальна кількість для веселої гри в компанії
- **4x4 дошка**: Залишається як є (оптимальний розмір для початківців)
- **Режим заблокованих клітинок: off**: Спрощує гру для нових гравців
- **Автоматично приховувати дошку: off**: Дошка завжди видима, що зручніше для локальних ігор
- **Заборонити зміни під час гри: off**: Дозволяє гравцям адаптувати налаштування під час гри

## Тестування

### Сценарій тестування
1. Перейти на сторінку `/local-setup`
2. Перевірити початкові значення всіх налаштувань
3. Перевірити, що 4 гравці створені з унікальними кольорами
4. Запустити гру та перевірити, що налаштування застосовані

### Очікуваний результат
- При відкритті `/local-setup` автоматично створюються 4 гравці
- Всі гравці мають унікальні кольори
- Налаштування відповідають новим значенням за замовчуванням
- Гра запускається з правильними налаштуваннями

## Файли, що були змінені

- `src/lib/stores/localGameStore.js` - змінено значення за замовчуванням в `createInitialState`

## Статус

✅ **ВИПРАВЛЕНО**

## Примітки

- Зміни стосуються тільки локальних ігор (`/local-setup`)
- Для ігор проти комп'ютера (`/game/vs-computer`) налаштування залишаються незмінними
- Користувачі все ще можуть змінювати налаштування вручну
- Розмір дошки залишається 4x4 як оптимальний для початківців 