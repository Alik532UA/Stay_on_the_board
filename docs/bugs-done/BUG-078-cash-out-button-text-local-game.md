---
status: done
---

# BUG-078: Зміна тексту кнопки "Забрати бали" для локальних ігор

## Опис проблеми

**Шлях:** `/game/local`

**Актуальний результат:** кнопка "Забрати бали"

**Очікуваний результат:** перейменувати на "Достроково завершити гру"

**Додаткова вимога:** для `/game/vs-computer` залишити текст "Забрати бали"

## Аналіз проблеми

### Причина
Текст кнопки "Забрати бали" не відповідає її функціональності в локальних іграх. Кнопка фактично завершує гру достроково, а не "забирає" бали.

### Додаткова проблема
Текст кнопки може бути неправильно зрозумілий користувачами в локальних іграх, оскільки він не відображає справжню функцію кнопки.

## Рішення

### 1. Додавання нових ключів локалізації
Додано новий ключ `cashOutLocal` до всіх файлів локалізації:

**Українська мова (`src/lib/i18n/uk/gameBoard.js`):**
```javascript
cashOutLocal: "Достроково<br>завершити<br>гру",
```

**Англійська мова (`src/lib/i18n/en/gameBoard.js`):**
```javascript
cashOutLocal: "End Game<br>Early",
```

**Нідерландська мова (`src/lib/i18n/nl/gameBoard.js`):**
```javascript
cashOutLocal: "Spel vroeg<br>beëindigen",
```

**Кримськотатарська мова (`src/lib/i18n/crh/gameBoard.js`):**
```javascript
cashOutLocal: "Oyunnı<br>erkenden<br>bitir",
```

### 2. Оновлення логіки відображення кнопки
Змінено `ScorePanelWidget.svelte` для умовного відображення тексту кнопки:

```svelte
<button class="cash-out-btn" on:click={cashOutAndEndGame} title={isMultiplayer ? $_('gameBoard.cashOutLocal') : $_('gameBoard.cashOut')}>
  {@html isMultiplayer ? $_('gameBoard.cashOutLocal') : $_('gameBoard.cashOut')}
</button>
```

### 3. Логіка визначення типу гри
Використовується існуюча змінна `isMultiplayer`, яка визначається як:
```javascript
$: isMultiplayer = $gameState.players.filter(p => p.type === 'human').length > 1;
```

## Тестування

### Сценарій тестування
1. Запустити локальну гру в `/game/local`
2. Перевірити текст кнопки в інтерфейсі
3. Запустити гру з комп'ютером в `/game/vs-computer`
4. Перевірити текст кнопки в інтерфейсі

### Очікуваний результат
- В локальних іграх кнопка відображає текст "Достроково завершити гру"
- В іграх з комп'ютером кнопка відображає текст "Забрати бали"
- Функціональність кнопки залишається незмінною в обох випадках

## Файли, що були змінені

- `src/lib/i18n/uk/gameBoard.js` - додано ключ `cashOutLocal`
- `src/lib/i18n/en/gameBoard.js` - додано ключ `cashOutLocal`
- `src/lib/i18n/nl/gameBoard.js` - додано ключ `cashOutLocal`
- `src/lib/i18n/crh/gameBoard.js` - додано ключ `cashOutLocal`
- `src/lib/components/widgets/ScorePanelWidget.svelte` - оновлено логіку відображення кнопки

## Статус

✅ **ВИПРАВЛЕНО**

## Примітки

- Зміна стосується тільки тексту кнопки, функціональність залишається незмінною
- Текст розбито на кілька рядків для кращого відображення в інтерфейсі
- Використовуються HTML теги `<br>` для переносу рядків
- Зміни застосовані для всіх мов (українська, англійська, нідерландська, кримськотатарська)
- Логіка автоматично визначає тип гри на основі кількості людських гравців 