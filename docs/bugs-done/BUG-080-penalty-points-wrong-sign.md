---
status: done
---

# BUG-080: Штрафні бали відображаються з неправильним знаком

## Опис проблеми

**Шлях:** `/game/local`

**Актуальний результат:** Штрафні бали відображаються біля основних балів в score-row як `+2`

**Очікуваний результат:** Штрафні бали відображаються біля основних балів в score-row як `-2`

## Аналіз проблеми

### Причина
Штрафні бали відображалися зі знаком плюс (`+2`), що створювало неправильне враження, ніби це додаткові бали. Насправді штрафні бали повинні відображатися зі знаком мінус (`-2`), оскільки вони зменшують загальний рахунок гравця.

### Логіка штрафних балів
- Штрафні бали нараховуються за "дзеркальні" ходи (коли гравець ходить на ту саму позицію, що й комп'ютер)
- Це покарання за невдалий хід, тому вони повинні відображатися як від'ємні значення
- Загальний рахунок гравця = основні бали - штрафні бали

## Рішення

### Зміна знака в ScorePanelWidget
Змінено відображення штрафних балів з `+{player.penaltyPoints}` на `-{player.penaltyPoints}`:

```svelte
{#if player.penaltyPoints > 0}
  <span 
    class="penalty-display" 
    on:click={showPenaltyInfo}
    on:keydown={e => (e.key === 'Enter' || e.key === ' ') && showPenaltyInfo()}
    title={$_('gameBoard.penaltyHint')}
    role="button"
    tabindex="0"
  >-{player.penaltyPoints}</span>
{/if}
```

## Тестування

### Сценарій тестування
1. Запустити локальну гру в `/game/local`
2. Зробити "дзеркальний" хід (ходити на ту саму позицію, що й комп'ютер)
3. Перевірити відображення штрафних балів в `score-panel`

### Очікуваний результат
- Штрафні бали відображаються зі знаком мінус (`-2`)
- Це правильно вказує на те, що це покарання, а не додаткові бали
- Візуально зрозуміло, що це зменшує загальний рахунок гравця

## Файли, що були змінені

- `src/lib/components/widgets/ScorePanelWidget.svelte` - змінено знак штрафних балів з `+` на `-`

## Статус

✅ **ВИПРАВЛЕНО**

## Примітки

- Зміна стосується тільки відображення, логіка нарахування штрафних балів залишається незмінною
- Штрафні бали все ще зберігаються як додатні числа в `localGameStore`
- Знак мінус додається тільки при відображенні в інтерфейсі
- Це покращує зрозумілість для користувачів, які тепер чітко бачать, що це покарання 