# Тести діагностики сайту

Цей документ описує систему тестів для діагностики проблем з сайтом Stay on the Board.

## Огляд

Система діагностики складається з:
- **Швидких тестів** - перевіряють основну структуру проекту
- **Тестів здоров'я** - перевіряють конфігурацію та залежності
- **Скрипта діагностики** - комплексна перевірка з детальним звітом

## Файли тестів

### 1. `src/tests/quick-diagnostics.test.js`
Швидка перевірка основних компонентів проекту.

**Перевіряє:**
- Наявність критичних файлів
- Правильність package.json
- Конфігурацію Vite та Svelte
- Структуру директорій
- Синтаксис TypeScript та JavaScript файлів

**Запуск:**
```bash
npx vitest run src/tests/quick-diagnostics.test.js
```

### 2. `src/tests/basic-health.test.js`
Розширена перевірка здоров'я проекту.

**Перевіряє:**
- Всі перевірки з quick-diagnostics
- Детальну перевірку конфігурацій
- Валідацію HTML структури
- Перевірку критичних компонентів гри
- Доступність Node.js API

**Запуск:**
```bash
npx vitest run src/tests/basic-health.test.js
```

### 3. `src/tests/site-health.test.js`
Тести з запуском dev сервера (потребує npm в PATH).

**Перевіряє:**
- Запуск dev сервера
- Доступність головної сторінки
- Роботу основних маршрутів
- Швидкість завантаження
- Збірку проекту

**Запуск:**
```bash
npx vitest run src/tests/site-health.test.js
```

### 4. `scripts/diagnose.js`
Комплексний скрипт діагностики.

**Перевіряє:**
- Всі критичні файли та директорії
- Залежності проекту
- Доступність команд (npm, node, npx)
- Запуск dev сервера
- Генерує детальний звіт

**Запуск:**
```bash
npm run diagnose
# або
node scripts/diagnose.js
```

## Використання

### Швидка перевірка
```bash
npm run diagnose
```

### Детальна перевірка
```bash
npx vitest run src/tests/basic-health.test.js
```

### Перевірка з запуском сервера
```bash
npx vitest run src/tests/site-health.test.js
```

## Інтерпретація результатів

### ✅ Успішні тести
- Всі файли присутні
- Конфігурації правильні
- Залежності встановлені
- Сервер запускається

### ❌ Проблеми
- **Відсутні файли** - потрібно відновити або створити
- **Неправильні конфігурації** - перевірити налаштування
- **Відсутні залежності** - виконати `npm install`
- **Помилки запуску** - перевірити PATH та права доступу

### ⚠️ Попередження
- Файли існують, але мають проблеми
- Конфігурації працюють, але не оптимальні
- Залежності встановлені, але версії застарілі

## Типові проблеми та рішення

### 1. "Сайт не відкривається"

**Діагностика:**
```bash
npm run diagnose
```

**Можливі причини:**
- Відсутні критичні файли
- Неправильна конфігурація
- Проблеми з залежностями
- Порт заблокований

**Рішення:**
1. Запустити діагностику
2. Виправити знайдені проблеми
3. Перезапустити сервер

### 2. "Помилки збірки"

**Діагностика:**
```bash
npx vitest run src/tests/site-health.test.js
```

**Можливі причини:**
- Синтаксичні помилки в коді
- Неправильні імпорти
- Проблеми з TypeScript

**Рішення:**
1. Перевірити синтаксис
2. Виправити імпорти
3. Оновити TypeScript конфігурацію

### 3. "Проблеми з залежностями"

**Діагностика:**
```bash
npm run diagnose
```

**Можливі причини:**
- Відсутні node_modules
- Застарілі версії
- Конфлікти залежностей

**Рішення:**
1. Видалити node_modules
2. Видалити package-lock.json
3. Виконати `npm install`

## Автоматизація

### CI/CD
Тести діагностики можна інтегрувати в CI/CD:

```yaml
# .github/workflows/diagnose.yml
name: Site Diagnostics
on: [push, pull_request]
jobs:
  diagnose:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm install
      - run: npm run diagnose
      - run: npx vitest run src/tests/basic-health.test.js
```

### Pre-commit hooks
Додати перевірку перед комітом:

```json
// package.json
{
  "husky": {
    "hooks": {
      "pre-commit": "npm run diagnose"
    }
  }
}
```

## Розширення

### Додавання нових тестів

1. Створити файл в `src/tests/`
2. Додати перевірки за шаблоном
3. Оновити документацію

### Додавання нових перевірок в скрипт

1. Відредагувати `scripts/diagnose.js`
2. Додати нові функції перевірки
3. Оновити звіт

## Підтримка

При виникненні проблем:
1. Запустити повну діагностику
2. Перевірити логи
3. Звернутися до документації
4. Створити issue з деталями помилки 