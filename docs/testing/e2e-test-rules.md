# Правила написання e2e автотестів

## 1. Використання ID для елементів
Якщо для автотеста потрібно взаємодіяти з кнопкою чи іншим елементом, для цього елемента необхідно створити унікальний `ID`. Не слід покладатися на текстові значення (`Name`, `Text`), оскільки вони можуть змінюватися.

## 2. Статус та коректність автотестів
Кожен автотест повинен мати статус, що відображає його стан.

*   **Проблема в автотесті:** Якщо автотест не працює, в першу чергу необхідно перевірити правильність самого тесту. Якщо функціонал на сайті працює коректно, проблема, ймовірно, в логіці автотесту, і її потрібно виправити.
*   **Статус "Done":** Коли автотест коректно працює та перевіряє функціонал, йому слід присвоїти статус `Done`. Це означає, що тест стабільний, і будь-які майбутні збої, швидше за все, вказують на проблеми в коді програми, а не в самому тесті.

## 3. Використання інструментів "Test Mode"
Автотести можуть використовувати інструменти, доступні при активації режиму "Test Mode: ON". Це дозволяє за потреби контролювати ходи комп'ютера та інші аспекти гри для більш глибокого тестування.

## 4. Тестування локалізованих елементів

**Проблема:** Перевірка елементів за їхнім видимим текстом (наприклад, `toHaveText('Приклад')`) робить тести крихкими. Такі тести ламаються щоразу, коли змінюється текст або мова інтерфейсу.

**Рішення:** Щоб уникнути цієї проблеми, слід перевіряти не сам текст, а ключ локалізації. Для цього до елемента додається спеціальний атрибут `data-i18n-key`, який містить ключ з файлу локалізації.

**Приклад:**

Замість крихкої перевірки:
`await expect(page.getByTestId('title')).toHaveText('Суперник у пастці!');`

Слід використовувати надійну перевірку атрибута:
`await expect(page.getByTestId('title')).toHaveAttribute('data-i18n-key', 'modal.computerNoMovesTitle');`

Такий підхід гарантує, що тест залишиться стабільним незалежно від змін у текстах або переключення мови.