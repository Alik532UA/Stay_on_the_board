# Правила написання e2e автотестів

## 1. Використання ID для елементів
Якщо для автотеста потрібно взаємодіяти з кнопкою чи іншим елементом, для цього елемента необхідно створити унікальний `ID`. Не слід покладатися на текстові значення (`Name`, `Text`), оскільки вони можуть змінюватися.

## 2. Статус та коректність автотестів
Кожен автотест повинен мати статус, що відображає його стан, за допомогою тегів Playwright.

*   **Тег `@done`:** Коли автотест коректно працює та перевіряє функціонал, йому слід присвоїти тег `@done`. Це означає, що тест стабільний, і будь-які майбутні збої, швидше за все, вказують на проблеми в коді програми, а не в самому тесті.
*   **Тег `@inProgress`:** Якщо автотест ще в розробці, йому слід присвоїти тег `@inProgress`.
*   **Тег `@bug`:** Якщо автотест виявив помилку в додатку, йому слід присвоїти тег `@bug`. Це допоможе відстежувати відомі проблеми та ігнорувати цей тест при необхідності.

**Приклад:**
```typescript
test('Повинно відображатися модальне вікно', { tag: '@done' }, async ({ page }) => {
  // ...
});
```

## 3. Використання інструментів "Test Mode"
Автотести можуть використовувати інструменти, доступні при активації режиму "Test Mode: ON". Це дозволяє за потреби контролювати ходи комп'ютера та інші аспекти гри для більш глибокого тестування.

## 4. Тестування локалізованих елементів

**Проблема:** Перевірка елементів за їхнім видимим текстом (наприклад, `toHaveText('Приклад')`) робить тести крихкими. Такі тести ламаються щоразу, коли змінюється текст або мова інтерфейсу.

**Рішення:** Щоб уникнути цієї проблеми, слід перевіряти не сам текст, а ключ локалізації. Для цього до елемента додається спеціальний атрибут `data-i18n-key`, який містить ключ з файлу локалізації.

**Приклад:**

Замість крихкої перевірки:
`await expect(page.getByTestId('title')).toHaveText('Суперник у пастці!');`

Слід використовувати надійну перевірку атрибута:
`await expect(page.getByTestId('title')).toHaveAttribute('data-i18n-key', 'modal.computerNoMovesTitle');`

Такий підхід гарантує, що тест залишиться стабільним незалежно від змін у текстах або переключення мови.