# Елемент: Чекбокс "Режим заблокованих клітинок"

## Призначення (Purpose)

Вмикає/вимикає ігровий режим, в якому клітинки блокуються після того, як фігура їх залишає.

## Джерело Правда (SSoT) та Залежності від Стану (State Dependencies)

-   **`settingsStore.blockModeEnabled`**: Основне джерело стану.
-   **`settingsStore.blockOnVisitCount`**: Залежне налаштування, яке стає видимим, коли `blockModeEnabled` є `true`.

## Поведінка (Behavior)

1.  **Вплив на UI**:
    *   Коли чекбокс **увімкнений**, під ним з'являється додаткова панель для вибору, після якого відвідування блокувати клітинку (0, 1, 2, 3).
    *   Кнопка "Ходів немає" на панелі керування стає видимою.
2.  **Вплив на логіку гри**:
    *   Активує логіку підрахунку відвідувань клітинок (`cellVisitCounts` в `gameState`).
    *   **Важливо:** У момент увімкнення режиму, всі існуючі лічильники відвідувань (`cellVisitCounts`) та ходів у режимі блокування (`movesInBlockMode`) **скидаються на нуль**. Режим починає працювати з "чистого аркуша".
    *   Змінює логіку розрахунку доступних ходів в `gameLogicService`, яка починає ігнорувати заблоковані клітинки.
    *   Дозволяє гравцю програти, ставши на заблоковану клітинку.

## Взаємодія з Користувачем (User Interaction)

-   **Клік на чекбокс**: Викликає `settingsStore.toggleBlockMode()`.
-   **Клік на кнопки "Блокувати після"**: Викликає `settingsStore.updateSettings({ blockOnVisitCount: count })`.

## Архітектурні Нотатки та UI/UX

-   Це приклад налаштування, яке глибоко впливає на основну ігрову логіку, а не лише на візуалізацію.
-   При виборі `blockOnVisitCount > 0` з'являється модальне вікно з попередженням, що це експертний режим, щоб запобігти випадковій активації складних правил.

## Критерії Прийняття (Acceptance Criteria)

-   [ ] При увімкненні з'являється панель вибору `blockOnVisitCount`.
-   [ ] При вимкненні ця панель зникає.
-   [ ] Кнопка "Ходів немає" з'являється/зникає відповідно до стану чекбокса.
-   [ ] Логіка гри коректно блокує клітинки згідно з вибраними налаштуваннями.