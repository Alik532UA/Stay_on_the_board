# Елемент: Чекбокс "Автоматично приховувати дошку"

## Призначення (Purpose)

Активує режим, в якому ігрова дошка автоматично приховується після ходу гравця, стимулюючи гру по пам'яті.

## Джерело Правда (SSoT) та Залежності від Стану (State Dependencies)

-   **`appSettingsStore.autoHideBoard`**: Основне джерело стану.

## Поведінка (Behavior)

-   Сам чекбокс лише встановлює прапорець `autoHideBoard` у `appSettingsStore`.
-   **Побічний ефект** цієї дії обробляється в іншому місці (наприклад, у `BoardWrapperWidget.svelte` або централізованому `uiEffectsStore`).
-   Слухач (`subscriber`) в `BoardWrapperWidget` відстежує зміни в `gameState.playerRow`/`playerCol`. Якщо позиція змінилася (тобто гравець зробив хід) і `$appSettingsStore.autoHideBoard` є `true`, він викликає `appSettingsStore.toggleShowBoard(false)` з невеликою затримкою.

## Взаємодія з Користувачем (User Interaction)

-   **Клік**: Викликає `appSettingsStore.toggleAutoHideBoard()`.

## Архітектурні Нотатки та UI/UX

-   **Відмінний приклад SoC**: Компонент чекбокса не містить складної логіки з таймерами чи підписками на стан гри. Він лише змінює налаштування. Окремий, більш високорівневий компонент (`BoardWrapperWidget`) відповідає за реалізацію *ефекту* цього налаштування. Це робить обидва компоненти простішими та більш сфокусованими.
-   Затримка перед приховуванням важлива для UX, щоб гравець встиг побачити результат свого ходу перед тим, як дошка зникне.
-   Логіка тепер використовує gameState для перевірки isFirstMove і isComputerMoveInProgress, забезпечуючи UDF (потік від gameState до UI-ефекту) і SoC (ефекти в uiEffectsStore). Затримка в autoHideBoard важлива для UX, дозволяючи побачити хід.

## Відомі проблеми та виправлення

Першопричина бага — локальні змінні в subscribe не зберігали стан; виправлено винесенням за callback і інтеграцією з gameState.isFirstMove для точного виявлення ходу гравця. Derived shouldHideBoard видалено як надлишковий для SSoT в appSettingsStore.showBoard.

## Критерії Прийняття (Acceptance Criteria)

-   [ ] Дошка приховується тільки після ходу гравця (зміна playerRow/col, moveHistory.length > 1, не на isFirstMove), а показується після очищення moveQueue без isComputerMoveInProgress.
-   [ ] Немає приховування на ініціалізації або під час ходу комп'ютера.
-   [ ] Коли чекбокс вимкнений, дошка залишається видимою після ходу гравця.
-   [ ] При старті нової гри дошка завжди видима, незалежно від цього налаштування.