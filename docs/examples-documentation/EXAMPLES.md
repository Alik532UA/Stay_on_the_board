# –¢–∏–ø: –î–æ–≤—ñ–¥–∫–∞
# –°—Ç–∞—Ç—É—Å: –ê–∫—Ç—É–∞–ª—å–Ω–æ
# –ù–∞–∑–≤–∞: –ü—Ä–∏–∫–ª–∞–¥–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø–æ–∫—Ä–∞—â–µ–Ω—å –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏
# –ú–µ—Ç–∞: –ù–∞–¥–∞—Ç–∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–ª—é—á–æ–≤–∏—Ö –ø–æ–∫—Ä–∞—â–µ–Ω—å –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ –¥–ª—è Stay on the Board.
# –û–ø–∏—Å: –î–æ–∫—É–º–µ–Ω—Ç –º—ñ—Å—Ç–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–¥—É, –ø–∞—Ç–µ—Ä–Ω—ñ–≤, JSDoc, —Ç–∏–ø—ñ–∑–∞—Ü—ñ—ó, —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–∏—Ö, –ø—ñ–¥–ø–∏—Å–∫–∏, undo/redo, UI/UX —Ç–∞ —ñ–Ω—à–∏—Ö —Ä—ñ—à–µ–Ω—å, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —É Stay on the Board.

## üéØ –ú–µ—Ç–∞
–ù–∞–¥–∞—Ç–∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–ª—é—á–æ–≤–∏—Ö –ø–æ–∫—Ä–∞—â–µ–Ω—å –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É "Stay on the board".

## 1. –¢–∏–ø—ñ–∑–∞—Ü—ñ—è —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### JSDoc –¥–ª—è State Manager

```javascript
/**
 * –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å—Ç–∞–Ω—É –¥–æ–¥–∞—Ç–∫—É
 * @class StateManager
 * @example
 * const stateManager = new StateManager();
 * stateManager.setState('game.points', 10);
 * const points = stateManager.getState('game.points'); // 10
 */
class StateManager {
    /**
     * –°—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä StateManager
     * @constructor
     */
    constructor() {
        /** @type {AppState} –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –¥–æ–¥–∞—Ç–∫—É */
        this.state = {
            settings: {
                language: 'uk',
                theme: 'dark',
                style: 'classic',
                speechEnabled: false,
                showBoard: true,
                showMoves: true, // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º true
                blockedMode: false
            },
            game: {
                isActive: false,
                board: [],
                currentPlayer: 1,
                points: 0,
                selectedDirection: null,
                selectedDistance: null,
                blockedCells: [],
                availableMoves: [],
                showingAvailableMoves: false,
                gameMode: null,
                playerNames: { p1: '', p2: '' },
                boardSize: 5,
                selectedMove: null,
                moveConfirmed: false,
                noMoves: false,
                gameHistory: [],
                lastMove: null
            },
            ui: {
                currentView: 'mainMenu',
                modal: {
                    isOpen: false,
                    title: '',
                    content: '',
                    buttons: []
                },
                topControls: {
                    isVisible: true
                },
                loading: false,
                error: null
            }
        };
        
        /** @type {Map<string, Map<number, Function>>} –ü—ñ–¥–ø–∏—Å–Ω–∏–∫–∏ –Ω–∞ –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É */
        this.subscribers = new Map();
        
        /** @type {number} –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID –¥–ª—è –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤ */
        this.subscriberId = 0;
        
        /** @type {Array<HistoryRecord>} –Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω –¥–ª—è undo/redo */
        this.history = [];
        
        /** @type {number} –Ü–Ω–¥–µ–∫—Å –ø–æ—Ç–æ—á–Ω–æ—ó –ø–æ–∑–∏—Ü—ñ—ó –≤ —ñ—Å—Ç–æ—Ä—ñ—ó */
        this.historyIndex = -1;
        
        /** @type {number} –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —ñ—Å—Ç–æ—Ä—ñ—ó */
        this.maxHistorySize = 50;
    }
    
    /**
     * –û—Ç—Ä–∏–º—É—î –∑–Ω–∞—á–µ–Ω–Ω—è –∑—ñ —Å—Ç–∞–Ω—É –∑–∞ —à–ª—è—Ö–æ–º
     * @param {string} [path] - –®–ª—è—Ö –¥–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 'game.points')
     * @returns {*} –ó–Ω–∞—á–µ–Ω–Ω—è –∑—ñ —Å—Ç–∞–Ω—É
     * @example
     * // –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–µ—Å—å —Å—Ç–∞–Ω
     * const state = stateManager.getState();
     * 
     * // –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å
     * const points = stateManager.getState('game.points');
     * 
     * // –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å
     * const p1Name = stateManager.getState('game.playerNames.p1');
     */
    getState(path = null) {
        if (!path) return this.state;
        
        return path.split('.').reduce((obj, key) => {
            return obj && obj[key] !== undefined ? obj[key] : undefined;
        }, this.state);
    }
    
    /**
     * –í—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–Ω–∞—á–µ–Ω–Ω—è –≤ —Å—Ç–∞–Ω—ñ
     * @param {string} path - –®–ª—è—Ö –¥–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ
     * @param {*} value - –ù–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è
     * @returns {boolean} –ß–∏ —É—Å–ø—ñ—à–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–æ
     * @throws {Error} –Ø–∫—â–æ —à–ª—è—Ö –Ω–µ–¥—ñ–π—Å–Ω–∏–π
     * @example
     * // –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Å—Ç—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å
     * stateManager.setState('game.points', 10);
     * 
     * // –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å
     * stateManager.setState('game.playerNames.p1', '–ì—Ä–∞–≤–µ—Ü—å 1');
     * 
     * // –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –º–∞—Å–∏–≤
     * stateManager.setState('game.board', [[0, 1, 0], [1, 0, 1]]);
     */
    setState(path, value) {
        const keys = path.split('.');
        const lastKey = keys.pop();
        const target = keys.reduce((obj, key) => {
            if (!obj[key]) obj[key] = {};
            return obj[key];
        }, this.state);
        
        const oldValue = target[lastKey];
        
        // –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∑–Ω–∞—á–µ–Ω—å
        if (!this.validateValue(path, value)) {
            console.warn(`Invalid value for ${path}:`, value);
            return false;
        }
        
        target[lastKey] = value;
        
        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ —ñ—Å—Ç–æ—Ä—ñ—é –¥–ª—è undo/redo
        this.saveToHistory(path, oldValue, value);
        
        // –°–ø–æ–≤—ñ—â–∞—î–º–æ –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤
        this.notifySubscribers(path, value, oldValue);
        
        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage —è–∫—â–æ —Ü–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
        if (path.startsWith('settings.')) {
            const settingKey = path.replace('settings.', '');
            localStorage.setItem(settingKey, JSON.stringify(value));
        }
        
        return true;
    }
    
    /**
     * –ü—ñ–¥–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞ –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É
     * @param {string} path - –®–ª—è—Ö –¥–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ
     * @param {Function} callback - –§—É–Ω–∫—Ü—ñ—è –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É
     * @returns {Function} –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–ø–∏—Å–∫–∏
     * @example
     * // –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∑–º—ñ–Ω–∏ –æ—á–æ–∫
     * const unsubscribe = stateManager.subscribe('game.points', (newValue, oldValue) => {
     *     console.log(`–û—á–∫–∏ –∑–º—ñ–Ω–∏–ª–∏—Å—è –∑ ${oldValue} –Ω–∞ ${newValue}`);
     *     updateScoreDisplay(newValue);
     * });
     * 
     * // –í—ñ–¥–ø–∏—Å–∫–∞
     * unsubscribe();
     * 
     * // –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤—Å—ñ –∑–º—ñ–Ω–∏ –≤ –≥—Ä—ñ
     * stateManager.subscribe('game', (gameState) => {
     *     updateGameUI(gameState);
     * });
     */
    subscribe(path, callback) {
        const id = ++this.subscriberId;
        if (!this.subscribers.has(path)) {
            this.subscribers.set(path, new Map());
        }
        this.subscribers.get(path).set(id, callback);
        
        // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≤—ñ–¥–ø–∏—Å–∫–∏
        return () => {
            const pathSubscribers = this.subscribers.get(path);
            if (pathSubscribers) {
                pathSubscribers.delete(id);
                if (pathSubscribers.size === 0) {
                    this.subscribers.delete(path);
                }
            }
        };
    }
    
    /**
     * –í–∞–ª—ñ–¥—É—î –∑–Ω–∞—á–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è–º
     * @param {string} path - –®–ª—è—Ö –¥–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ
     * @param {*} value - –ó–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
     * @returns {boolean} –ß–∏ –≤–∞–ª—ñ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è
     * @private
     */
    validateValue(path, value) {
        // –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø–æ–ª—ñ–≤
        if (path === 'game.currentPlayer' && (value < 1 || value > 2)) {
            return false;
        }
        
        if (path === 'game.boardSize' && (value < 3 || value > 10)) {
            return false;
        }
        
        if (path === 'settings.language' && !['uk', 'en', 'crh', 'nl'].includes(value)) {
            return false;
        }
        
        if (path === 'settings.theme' && !['light', 'dark'].includes(value)) {
            return false;
        }
        
        if (path === 'settings.style' && !['classic', 'peak', 'cs2', 'glass', 'material'].includes(value)) {
            return false;
        }
        
        return true;
    }
}

/**
 * @typedef {Object} HistoryRecord
 * @property {string} path - –®–ª—è—Ö –¥–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ
 * @property {*} oldValue - –°—Ç–∞—Ä–µ –∑–Ω–∞—á–µ–Ω–Ω—è
 * @property {*} newValue - –ù–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è
 * @property {number} timestamp - –ß–∞—Å –∑–º—ñ–Ω–∏
 */

/**
 * @typedef {Object} AppState
 * @property {SettingsState} settings - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É
 * @property {GameState} game - –°—Ç–∞–Ω –≥—Ä–∏
 * @property {UIState} ui - –°—Ç–∞–Ω —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
 */
```

## 2. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—ñ–π (Event System)

### Event Bus –∑ middleware

```javascript
/**
 * –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—ñ–π –∑ middleware
 * @class EventBus
 * @example
 * const eventBus = new EventBus();
 * 
 * // –î–æ–¥–∞—î–º–æ middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
 * eventBus.use((eventData) => {
 *     console.log(`Event: ${eventData.type}`, eventData.data);
 *     return eventData;
 * });
 * 
 * // –ü—ñ–¥–ø–∏—Å—É—î–º–æ—Å—è –Ω–∞ –ø–æ–¥—ñ—ó
 * eventBus.on('game.move', (data) => {
 *     console.log('–•—ñ–¥ –≥—Ä–∞–≤—Ü—è:', data);
 * });
 * 
 * // –ï–º—ñ—Ç—É—î–º–æ –ø–æ–¥—ñ—é
 * eventBus.emit('game.move', { player: 1, direction: 'up', distance: 2 });
 */
class EventBus {
    constructor() {
        /** @type {Map<string, Array<Function>>} –°–ª—É—Ö–∞—á—ñ –ø–æ–¥—ñ–π */
        this.listeners = new Map();
        
        /** @type {Array<Function>} Middleware —Ñ—É–Ω–∫—Ü—ñ—ó */
        this.middleware = [];
        
        /** @type {boolean} –ß–∏ –∑–Ω–∏—â–µ–Ω–∏–π Event Bus */
        this.isDestroyed = false;
        
        /** @type {number} –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø–æ–¥—ñ–π –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        this.eventCount = 0;
    }
    
    /**
     * –ï–º—ñ—Ç—É—î –ø–æ–¥—ñ—é
     * @param {string} event - –ù–∞–∑–≤–∞ –ø–æ–¥—ñ—ó
     * @param {*} data - –î–∞–Ω—ñ –ø–æ–¥—ñ—ó
     * @example
     * eventBus.emit('game.start', { boardSize: 5, mode: 'vsComputer' });
     * eventBus.emit('ui.theme.change', { theme: 'dark', style: 'peak' });
     * eventBus.emit('error', { message: '–ü–æ–º–∏–ª–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è', code: 500 });
     */
    emit(event, data = {}) {
        if (this.isDestroyed) return;
        
        this.eventCount++;
        
        const eventData = {
            type: event,
            data,
            timestamp: Date.now(),
            id: this.generateEventId(),
            count: this.eventCount
        };
        
        // –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ middleware
        const processedData = this.applyMiddleware(eventData);
        if (processedData === null) return; // –ü–æ–¥—ñ—é –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ
        
        // –°–ø–æ–≤—ñ—â–∞—î–º–æ —Å–ª—É—Ö–∞—á—ñ–≤
        const listeners = this.listeners.get(event) || [];
        listeners.forEach(listener => {
            try {
                listener(processedData);
            } catch (error) {
                console.error(`Error in event listener for ${event}:`, error);
                // –ï–º—ñ—Ç—É—î–º–æ –ø–æ–¥—ñ—é –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
                this.emit('error', { 
                    originalEvent: event, 
                    error: error.message,
                    stack: error.stack 
                });
            }
        });
        
        // –õ–æ–≥—É—î–º–æ –ø–æ–¥—ñ—é –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
        if (process.env.NODE_ENV === 'development') {
            console.log(`Event emitted: ${event}`, processedData);
        }
    }
    
    /**
     * –î–æ–¥–∞—î —Å–ª—É—Ö–∞—á–∞ –ø–æ–¥—ñ—ó
     * @param {string} event - –ù–∞–∑–≤–∞ –ø–æ–¥—ñ—ó
     * @param {Function} handler - –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó
     * @returns {Function} –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–ø–∏—Å–∫–∏
     * @example
     * const unsubscribe = eventBus.on('game.move', (data) => {
     *     updateBoard(data);
     *     playSound('move');
     * });
     * 
     * // –ü—ñ–∑–Ω—ñ—à–µ –≤—ñ–¥–ø–∏—Å—É—î–º–æ—Å—è
     * unsubscribe();
     */
    on(event, handler) {
        if (this.isDestroyed) return () => {};
        
        if (!this.listeners.has(event)) {
            this.listeners.set(event, []);
        }
        
        this.listeners.get(event).push(handler);
        
        // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≤—ñ–¥–ø–∏—Å–∫–∏
        return () => this.off(event, handler);
    }
    
    /**
     * –î–æ–¥–∞—î —Å–ª—É—Ö–∞—á–∞, —è–∫–∏–π —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –æ–¥–∏–Ω —Ä–∞–∑
     * @param {string} event - –ù–∞–∑–≤–∞ –ø–æ–¥—ñ—ó
     * @param {Function} handler - –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó
     * @example
     * eventBus.once('game.loaded', () => {
     *     showWelcomeMessage();
     * });
     */
    once(event, handler) {
        const onceHandler = (data) => {
            handler(data);
            this.off(event, onceHandler);
        };
        
        this.on(event, onceHandler);
    }
    
    /**
     * –î–æ–¥–∞—î middleware
     * @param {Function} middleware - Middleware —Ñ—É–Ω–∫—Ü—ñ—è
     * @example
     * // Middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
     * eventBus.use((eventData) => {
     *     console.log(`[${new Date().toISOString()}] ${eventData.type}`, eventData.data);
     *     return eventData;
     * });
     * 
     * // Middleware –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
     * eventBus.use((eventData) => {
     *     if (eventData.type === 'debug' && !isDevelopment) {
     *         return null; // –ë–ª–æ–∫—É—î–º–æ debug –ø–æ–¥—ñ—ó –≤ production
     *     }
     *     return eventData;
     * });
     */
    use(middleware) {
        this.middleware.push(middleware);
    }
    
    /**
     * –ó–∞—Å—Ç–æ—Å–æ–≤—É—î middleware –¥–æ –ø–æ–¥—ñ—ó
     * @param {Object} eventData - –î–∞–Ω—ñ –ø–æ–¥—ñ—ó
     * @returns {Object|null} –û–±—Ä–æ–±–ª–µ–Ω—ñ –¥–∞–Ω—ñ –∞–±–æ null —è–∫—â–æ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ
     * @private
     */
    applyMiddleware(eventData) {
        let processedData = eventData;
        
        for (const middleware of this.middleware) {
            try {
                processedData = middleware(processedData);
                if (processedData === null) return null; // –ü–æ–¥—ñ—é –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ
            } catch (error) {
                console.error('Middleware error:', error);
                return null;
            }
        }
        
        return processedData;
    }
    
    /**
     * –û—Ç—Ä–∏–º—É—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–¥—ñ–π
     * @returns {Object} –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
     * @example
     * const stats = eventBus.getStats();
     * console.log(`Total events: ${stats.totalEvents}`);
     * console.log(`Active listeners: ${stats.activeListeners}`);
     */
    getStats() {
        const stats = {
            totalEvents: this.eventCount,
            activeListeners: 0,
            events: {},
            middleware: this.middleware.length
        };
        
        for (const [event, listeners] of this.listeners) {
            stats.events[event] = listeners.length;
            stats.activeListeners += listeners.length;
        }
        
        return stats;
    }
}

// Middleware –ø—Ä–∏–∫–ª–∞–¥–∏

/**
 * Middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π
 * @param {Object} options - –û–ø—Ü—ñ—ó –ª–æ–≥—É–≤–∞–Ω–Ω—è
 * @returns {Function} Middleware —Ñ—É–Ω–∫—Ü—ñ—è
 */
export function createLoggerMiddleware(options = {}) {
    const {
        enabled = process.env.NODE_ENV === 'development',
        level = 'info',
        filter = () => true,
        formatter = (eventData) => `[${eventData.type}] ${JSON.stringify(eventData.data)}`
    } = options;
    
    return (eventData) => {
        if (!enabled) return eventData;
        if (!filter(eventData)) return eventData;
        
        const message = formatter(eventData);
        
        switch (level) {
            case 'error':
                console.error(message);
                break;
            case 'warn':
                console.warn(message);
                break;
            case 'debug':
                console.debug(message);
                break;
            default:
                console.log(message);
        }
        
        return eventData;
    };
}

/**
 * Middleware –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
 * @param {Object} tracker - –ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏–π —Ç—Ä–µ–∫–µ—Ä
 * @returns {Function} Middleware —Ñ—É–Ω–∫—Ü—ñ—è
 */
export function createAnalyticsMiddleware(tracker) {
    return (eventData) => {
        if (tracker && typeof tracker.track === 'function') {
            tracker.track(eventData.type, {
                ...eventData.data,
                timestamp: eventData.timestamp,
                eventId: eventData.id
            });
        }
        
        return eventData;
    };
}

/**
 * Middleware –¥–ª—è –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥—É
 * @param {number} delay - –ó–∞—Ç—Ä–∏–º–∫–∞ –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö
 * @returns {Function} Middleware —Ñ—É–Ω–∫—Ü—ñ—è
 */
export function createDebounceMiddleware(delay = 100) {
    const timers = new Map();
    
    return (eventData) => {
        const key = eventData.type;
        
        if (timers.has(key)) {
            clearTimeout(timers.get(key));
        }
        
        const timer = setTimeout(() => {
            timers.delete(key);
        }, delay);
        
        timers.set(key, timer);
        
        return eventData;
    };
}
```

## 3. –°–∏—Å—Ç–µ–º–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è

### DOM –∫–µ—à –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –æ—á–∏—â–µ–Ω–Ω—è–º

```javascript
/**
 * –ö–µ—à –¥–ª—è DOM-–µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –æ—á–∏—â–µ–Ω–Ω—è–º
 * @class DOMCache
 * @example
 * const domCache = new DOMCache();
 * 
 * // –û—Ç—Ä–∏–º—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç (–∫–µ—à—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
 * const button = domCache.get('#start-game-btn');
 * 
 * // –û—Ç—Ä–∏–º—É—î–º–æ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
 * const cells = domCache.getAll('.cell');
 * 
 * // –û—á–∏—â—É—î–º–æ –∫–µ—à
 * domCache.clear();
 */
class DOMCache {
    constructor(options = {}) {
        const {
            maxSize = 100,
            ttl = 5 * 60 * 1000, // 5 —Ö–≤–∏–ª–∏–Ω
            autoCleanup = true,
            cleanupInterval = 60 * 1000 // 1 —Ö–≤–∏–ª–∏–Ω–∞
        } = options;
        
        /** @type {Map<string, CacheEntry>} –ö–µ—à –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ */
        this.cache = new Map();
        
        /** @type {Map<Element, MutationObserver>} –°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á—ñ –∑–∞ –∑–º—ñ–Ω–∞–º–∏ */
        this.observers = new Map();
        
        /** @type {number} –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –∫–µ—à—É */
        this.maxSize = maxSize;
        
        /** @type {number} Time to live –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö */
        this.ttl = ttl;
        
        /** @type {boolean} –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è */
        this.autoCleanup = autoCleanup;
        
        /** @type {number} –Ü–Ω—Ç–µ—Ä–≤–∞–ª –æ—á–∏—â–µ–Ω–Ω—è */
        this.cleanupInterval = cleanupInterval;
        
        /** @type {number} –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø–æ–ø–∞–¥–∞–Ω—å –≤ –∫–µ—à */
        this.hits = 0;
        
        /** @type {number} –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø—Ä–æ–º–∞—Ö—ñ–≤ –∫–µ—à—É */
        this.misses = 0;
        
        // –ó–∞–ø—É—Å–∫–∞—î–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è
        if (this.autoCleanup) {
            this.startAutoCleanup();
        }
    }
    
    /**
     * –û—Ç—Ä–∏–º—É—î –µ–ª–µ–º–µ–Ω—Ç –∑ –∫–µ—à—É –∞–±–æ DOM
     * @param {string} selector - CSS —Å–µ–ª–µ–∫—Ç–æ—Ä
     * @param {Element} [context] - –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—à—É–∫—É
     * @returns {Element|null} DOM –µ–ª–µ–º–µ–Ω—Ç
     * @example
     * const button = domCache.get('#start-game-btn');
     * const cell = domCache.get('.cell', gameBoard);
     */
    get(selector, context = document) {
        const key = this.getCacheKey(selector, context);
        
        if (this.cache.has(key)) {
            const cached = this.cache.get(key);
            
            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ TTL
            if (Date.now() - cached.timestamp > this.ttl) {
                this.cache.delete(key);
                this.misses++;
            } else if (this.isElementValid(cached.element)) {
                this.hits++;
                return cached.element;
            } else {
                this.cache.delete(key);
                this.misses++;
            }
        } else {
            this.misses++;
        }
        
        const element = context.querySelector(selector);
        if (element) {
            this.set(key, element);
        }
        
        return element;
    }
    
    /**
     * –û—Ç—Ä–∏–º—É—î –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑ –∫–µ—à—É –∞–±–æ DOM
     * @param {string} selector - CSS —Å–µ–ª–µ–∫—Ç–æ—Ä
     * @param {Element} [context] - –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—à—É–∫—É
     * @returns {NodeList} –°–ø–∏—Å–æ–∫ DOM –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
     * @example
     * const cells = domCache.getAll('.cell');
     * const buttons = domCache.getAll('button', modal);
     */
    getAll(selector, context = document) {
        const key = this.getCacheKey(selector, context);
        
        if (this.cache.has(key)) {
            const cached = this.cache.get(key);
            
            if (Date.now() - cached.timestamp > this.ttl) {
                this.cache.delete(key);
                this.misses++;
            } else if (this.isElementListValid(cached.elements)) {
                this.hits++;
                return cached.elements;
            } else {
                this.cache.delete(key);
                this.misses++;
            }
        } else {
            this.misses++;
        }
        
        const elements = context.querySelectorAll(selector);
        if (elements.length > 0) {
            this.set(key, elements);
        }
        
        return elements;
    }
    
    /**
     * –í—Å—Ç–∞–Ω–æ–≤–ª—é—î –µ–ª–µ–º–µ–Ω—Ç –≤ –∫–µ—à
     * @param {string} key - –ö–ª—é—á –∫–µ—à—É
     * @param {Element|NodeList} element - DOM –µ–ª–µ–º–µ–Ω—Ç –∞–±–æ —Å–ø–∏—Å–æ–∫
     * @private
     */
    set(key, element) {
        // –û–±–º–µ–∂—É—î–º–æ —Ä–æ–∑–º—ñ—Ä –∫–µ—à—É
        if (this.cache.size >= this.maxSize) {
            this.evictOldest();
        }
        
        this.cache.set(key, {
            element: element,
            timestamp: Date.now(),
            accessCount: 0
        });
        
        // –î–æ–¥–∞—î–º–æ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á –∑–∞ –∑–º—ñ–Ω–∞–º–∏
        this.observeElement(element);
    }
    
    /**
     * –í–∏–¥–∞–ª—è—î –Ω–∞–π—Å—Ç–∞—Ä—ñ—à–∏–π –µ–ª–µ–º–µ–Ω—Ç –∑ –∫–µ—à—É
     * @private
     */
    evictOldest() {
        let oldestKey = null;
        let oldestTime = Date.now();
        
        for (const [key, entry] of this.cache) {
            if (entry.timestamp < oldestTime) {
                oldestTime = entry.timestamp;
                oldestKey = key;
            }
        }
        
        if (oldestKey) {
            this.cache.delete(oldestKey);
        }
    }
    
    /**
     * –û—Ç—Ä–∏–º—É—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–µ—à—É
     * @returns {Object} –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
     * @example
     * const stats = domCache.getStats();
     * console.log(`Hit rate: ${stats.hitRate}%`);
     * console.log(`Cache size: ${stats.size}/${stats.maxSize}`);
     */
    getStats() {
        const totalRequests = this.hits + this.misses;
        const hitRate = totalRequests > 0 ? (this.hits / totalRequests) * 100 : 0;
        
        return {
            size: this.cache.size,
            maxSize: this.maxSize,
            hits: this.hits,
            misses: this.misses,
            hitRate: Math.round(hitRate * 100) / 100,
            memoryUsage: this.estimateMemoryUsage(),
            ttl: this.ttl
        };
    }
    
    /**
     * –û—Ü—ñ–Ω—é—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ
     * @returns {number} –†–æ–∑–º—ñ—Ä –≤ –±–∞–π—Ç–∞—Ö
     * @private
     */
    estimateMemoryUsage() {
        let size = 0;
        for (const [key, value] of this.cache) {
            size += key.length * 2; // UTF-16
            size += 8; // timestamp
            size += 8; // accessCount
            size += 8; // element reference
        }
        return size;
    }
}
```

## 4. –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### Unit —Ç–µ—Å—Ç–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

```javascript
/**
 * Unit —Ç–µ—Å—Ç–∏ –¥–ª—è BaseComponent
 */
describe('BaseComponent', () => {
    let component;
    let element;
    
    beforeEach(() => {
        element = document.createElement('div');
        element.innerHTML = `
            <button class="test-btn">Test</button>
            <span class="test-text">Hello</span>
        `;
        document.body.appendChild(element);
        
        component = new TestComponent(element);
    });
    
    afterEach(() => {
        component.destroy();
        document.body.removeChild(element);
    });
    
    describe('constructor', () => {
        test('should initialize component correctly', () => {
            expect(component.element).toBe(element);
            expect(component.isDestroyed).toBe(false);
            expect(component.renderCount).toBe(1);
        });
    });
    
    describe('event handling', () => {
        test('should add event listener', () => {
            const mockHandler = jest.fn();
            component.addEventListener('.test-btn', 'click', mockHandler);
            
            element.querySelector('.test-btn').click();
            expect(mockHandler).toHaveBeenCalled();
        });
        
        test('should remove event listener', () => {
            const mockHandler = jest.fn();
            component.addEventListener('.test-btn', 'click', mockHandler);
            component.removeEventListener('.test-btn', 'click');
            
            element.querySelector('.test-btn').click();
            expect(mockHandler).not.toHaveBeenCalled();
        });
    });
    
    describe('DOM manipulation', () => {
        test('should set text content', () => {
            component.setText('.test-text', 'New text');
            expect(element.querySelector('.test-text').textContent).toBe('New text');
        });
        
        test('should add class', () => {
            component.addClass('.test-btn', 'active');
            expect(element.querySelector('.test-btn').classList.contains('active')).toBe(true);
        });
        
        test('should remove class', () => {
            element.querySelector('.test-btn').classList.add('active');
            component.removeClass('.test-btn', 'active');
            expect(element.querySelector('.test-btn').classList.contains('active')).toBe(false);
        });
    });
    
    describe('state subscription', () => {
        test('should subscribe to state changes', () => {
            const mockCallback = jest.fn();
            component.subscribe('game.points', mockCallback);
            
            stateManager.setState('game.points', 10);
            expect(mockCallback).toHaveBeenCalledWith(10);
        });
    });
    
    describe('lifecycle', () => {
        test('should destroy component correctly', () => {
            const mockHandler = jest.fn();
            component.addEventListener('.test-btn', 'click', mockHandler);
            
            component.destroy();
            
            expect(component.isDestroyed).toBe(true);
            expect(component.subscriptions.length).toBe(0);
            expect(component.eventListeners.size).toBe(0);
            
            element.querySelector('.test-btn').click();
            expect(mockHandler).not.toHaveBeenCalled();
        });
    });
});

/**
 * –¢–µ—Å—Ç–æ–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
 */
class TestComponent extends BaseComponent {
    render() {
        this.renderCount++;
    }
    
    bindEvents() {
        // –¢–µ—Å—Ç–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
    }
    
    subscribeToState() {
        // –¢–µ—Å—Ç–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
    }
}
```

## 5. –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è

### –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –ª–æ–≥–µ—Ä

```javascript
/**
 * –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è
 * @class Logger
 * @example
 * Logger.info('Game started', { boardSize: 5, mode: 'vsComputer' });
 * Logger.error('Connection failed', { error: 'Network error', code: 500 });
 * Logger.debug('State updated', { path: 'game.points', value: 10 });
 */
class Logger {
    static levels = { ERROR: 0, WARN: 1, INFO: 2, DEBUG: 3 };
    
    static config = {
        level: process.env.NODE_ENV === 'development' ? 'DEBUG' : 'ERROR',
        maxLogs: 1000,
        persistToStorage: true,
        sendToServer: false,
        serverUrl: null
    };
    
    static logs = [];
    
    /**
     * –õ–æ–≥—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
     * @param {string} level - –†—ñ–≤–µ–Ω—å –ª–æ–≥—É–≤–∞–Ω–Ω—è
     * @param {string} message - –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
     * @param {Object} data - –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
     * @example
     * Logger.log('INFO', 'User action', { action: 'click', target: 'start-btn' });
     */
    static log(level, message, data = {}) {
        if (this.levels[level] > this.levels[this.config.level]) {
            return;
        }
        
        const logEntry = {
            level,
            message,
            data,
            timestamp: new Date().toISOString(),
            id: this.generateLogId(),
            url: window.location.href,
            userAgent: navigator.userAgent
        };
        
        // –î–æ–¥–∞—î–º–æ –¥–æ –ø–∞–º'—è—Ç—ñ
        this.logs.push(logEntry);
        
        // –û–±–º–µ–∂—É—î–º–æ —Ä–æ–∑–º—ñ—Ä
        if (this.logs.length > this.config.maxLogs) {
            this.logs.shift();
        }
        
        // –í–∏–≤–æ–¥–∏–º–æ –≤ –∫–æ–Ω—Å–æ–ª—å
        this.outputToConsole(logEntry);
        
        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage
        if (this.config.persistToStorage) {
            this.saveToStorage(logEntry);
        }
        
        // –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        if (this.config.sendToServer && this.config.serverUrl) {
            this.sendToServer(logEntry);
        }
    }
    
    /**
     * –õ–æ–≥—É—î –ø–æ–º–∏–ª–∫—É
     * @param {string} message - –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
     * @param {Object} data - –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
     */
    static error(message, data = {}) {
        this.log('ERROR', message, data);
    }
    
    /**
     * –õ–æ–≥—É—î –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
     * @param {string} message - –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
     * @param {Object} data - –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
     */
    static warn(message, data = {}) {
        this.log('WARN', message, data);
    }
    
    /**
     * –õ–æ–≥—É—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
     * @param {string} message - –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
     * @param {Object} data - –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
     */
    static info(message, data = {}) {
        this.log('INFO', message, data);
    }
    
    /**
     * –õ–æ–≥—É—î –¥–ª—è –¥–µ–±–∞–≥—É
     * @param {string} message - –î–µ–±–∞–≥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
     * @param {Object} data - –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
     */
    static debug(message, data = {}) {
        this.log('DEBUG', message, data);
    }
    
    /**
     * –í–∏–≤–æ–¥–∏—Ç—å –ª–æ–≥ –≤ –∫–æ–Ω—Å–æ–ª—å
     * @param {Object} logEntry - –ó–∞–ø–∏—Å –ª–æ–≥—É
     * @private
     */
    static outputToConsole(logEntry) {
        const { level, message, data, timestamp } = logEntry;
        const prefix = `[${timestamp}] [${level}]`;
        
        switch (level) {
            case 'ERROR':
                console.error(prefix, message, data);
                break;
            case 'WARN':
                console.warn(prefix, message, data);
                break;
            case 'DEBUG':
                console.debug(prefix, message, data);
                break;
            default:
                console.log(prefix, message, data);
        }
    }
    
    /**
     * –ó–±–µ—Ä—ñ–≥–∞—î –ª–æ–≥ –≤ localStorage
     * @param {Object} logEntry - –ó–∞–ø–∏—Å –ª–æ–≥—É
     * @private
     */
    static saveToStorage(logEntry) {
        try {
            const logs = JSON.parse(localStorage.getItem('app_logs') || '[]');
            logs.push(logEntry);
            
            // –û–±–º–µ–∂—É—î–º–æ —Ä–æ–∑–º—ñ—Ä
            if (logs.length > this.config.maxLogs) {
                logs.splice(0, logs.length - this.config.maxLogs);
            }
            
            localStorage.setItem('app_logs', JSON.stringify(logs));
        } catch (error) {
            console.error('Failed to save log to storage:', error);
        }
    }
    
    /**
     * –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –ª–æ–≥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
     * @param {Object} logEntry - –ó–∞–ø–∏—Å –ª–æ–≥—É
     * @private
     */
    static async sendToServer(logEntry) {
        try {
            await fetch(this.config.serverUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(logEntry)
            });
        } catch (error) {
            console.error('Failed to send log to server:', error);
        }
    }
    
    /**
     * –û—Ç—Ä–∏–º—É—î –≤—Å—ñ –ª–æ–≥–∏
     * @returns {Array} –ú–∞—Å–∏–≤ –ª–æ–≥—ñ–≤
     */
    static getLogs() {
        return [...this.logs];
    }
    
    /**
     * –û—á–∏—â—É—î –ª–æ–≥–∏
     */
    static clearLogs() {
        this.logs = [];
        localStorage.removeItem('app_logs');
    }
    
    /**
     * –ï–∫—Å–ø–æ—Ä—Ç—É—î –ª–æ–≥–∏
     * @returns {string} JSON —Ä—è–¥–æ–∫ –∑ –ª–æ–≥–∞–º–∏
     */
    static exportLogs() {
        return JSON.stringify(this.logs, null, 2);
    }
    
    /**
     * –ì–µ–Ω–µ—Ä—É—î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID –¥–ª—è –ª–æ–≥—É
     * @returns {string} –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID
     * @private
     */
    static generateLogId() {
        return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
    }
}
```

–¶—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—é—Ç—å –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ —Å–ø–æ—Å–æ–±–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–ª—é—á–æ–≤–∏—Ö –ø–æ–∫—Ä–∞—â–µ–Ω—å –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏. –í–æ–Ω–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∞–¥–∞–ø—Ç–æ–≤–∞–Ω—ñ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –≤ —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç—É –ø–æ—Å—Ç—É–ø–æ–≤–æ, –±–µ–∑ –ø–æ—Ä—É—à–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ.

## üöÄ –ù–û–í–Ü –ù–ê–ü–†–Ø–ú–ö–ò –î–õ–Ø –ü–û–î–ê–õ–¨–®–û–ì–û –†–û–ó–í–ò–¢–ö–£

### üìä –ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É

–ü—Ä–æ–µ–∫—Ç "Stay on the board" –≤–∂–µ –º–∞—î –¥–æ—Å–∏—Ç—å —Ä–æ–∑–≤–∏–Ω–µ–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, State Manager, —Ç–∞ —ñ–Ω—à–∏–º–∏ —Å—É—á–∞—Å–Ω–∏–º–∏ –ø–∞—Ç–µ—Ä–Ω–∞–º–∏. –û–¥–Ω–∞–∫ —î –∫—ñ–ª—å–∫–∞ –∫–ª—é—á–æ–≤–∏—Ö –Ω–∞–ø—Ä—è–º–∫—ñ–≤ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:

#### ‚úÖ –©–æ –≤–∂–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –¥–æ–±—Ä–µ:
1. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞** - –≤—Å—ñ –æ—Å–Ω–æ–≤–Ω—ñ UI –µ–ª–µ–º–µ–Ω—Ç–∏ –≤–∏–Ω–µ—Å–µ–Ω—ñ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
2. **State Management** - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º –∑ –ø—ñ–¥–ø–∏—Å–∫–æ—é
3. **View Manager** - —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –º—ñ–∂ –µ–∫—Ä–∞–Ω–∞–º–∏
4. **DOM Utilities** - –±–∞–≥–∞—Ç–∏–π –Ω–∞–±—ñ—Ä —É—Ç–∏–ª—ñ—Ç –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ DOM
5. **–ú–æ–¥—É–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - –∫–æ–¥ —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏–π –Ω–∞ –ª–æ–≥—ñ—á–Ω—ñ –º–æ–¥—É–ª—ñ
6. **–Ü–Ω—Ç–µ—Ä–Ω–∞—Ü—ñ–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ 4 –º–æ–≤
7. **–°–∏—Å—Ç–µ–º–∞ —Ç–µ–º** - CSS-–∑–º—ñ–Ω–Ω—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å—Ç–∏–ª—ñ–≤

#### ‚ö†Ô∏è –û–±–ª–∞—Å—Ç—ñ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:
1. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Å–∏—Å—Ç–µ–º–∏ –ø–æ–¥—ñ–π** - –Ω–µ–º–∞—î —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ Event Bus
2. **–û–±–º–µ–∂–µ–Ω–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è** - –≤—ñ–¥—Å—É—Ç–Ω—ñ–π TypeScript –∞–±–æ JSDoc
3. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∫–µ—à—É–≤–∞–Ω–Ω—è** - –Ω–µ–º–∞—î —Å–∏—Å—Ç–µ–º–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è DOM –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
4. **–û–±–º–µ–∂–µ–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** - –≤—ñ–¥—Å—É—Ç–Ω—ñ unit —Ç–µ—Å—Ç–∏
5. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ª–æ–≥—É–≤–∞–Ω–Ω—è** - –Ω–µ–º–∞—î —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è
6. **–û–±–º–µ–∂–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - –Ω–µ–º–∞—î –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É
7. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏** - –Ω–µ–º–∞—î —Å–∏—Å—Ç–µ–º–∏ –∑–±–æ—Ä—É –º–µ—Ç—Ä–∏–∫

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

#### 1. **–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—ñ–π (Event System)** - –í–ò–°–û–ö–ò–ô –ü–†–Ü–û–†–ò–¢–ï–¢
–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—É —Å–∏—Å—Ç–µ–º—É –ø–æ–¥—ñ–π –¥–ª—è –∑–≤'—è–∑–∫—É –º—ñ–∂ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

#### 2. **–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** - –í–ò–°–û–ö–ò–ô –ü–†–Ü–û–†–ò–¢–ï–¢
–î–æ–¥–∞—Ç–∏ unit —Ç–µ—Å—Ç–∏ –¥–ª—è –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–π.

#### 3. **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è** - –í–ò–°–û–ö–ò–ô –ü–†–Ü–û–†–ò–¢–ï–¢
–î–æ–¥–∞—Ç–∏ JSDoc –∞–±–æ TypeScript –¥–ª—è –∫—Ä–∞—â–æ—ó —Ç–∏–ø–æ–±–µ–∑–ø–µ–∫–∏.

#### 4. **–°–∏—Å—Ç–µ–º–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è** - –°–ï–†–ï–î–ù–Ü–ô –ü–†–Ü–û–†–ò–¢–ï–¢
–û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —á–µ—Ä–µ–∑ –∫–µ—à—É–≤–∞–Ω–Ω—è DOM –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.

#### 5. **–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è** - –°–ï–†–ï–î–ù–Ü–ô –ü–†–Ü–û–†–ò–¢–ï–¢
–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥–µ–±–∞–≥—É —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É.

#### 6. **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ** - –°–ï–†–ï–î–ù–Ü–ô –ü–†–Ü–û–†–ò–¢–ï–¢
–ü–æ–∫—Ä–∞—â–∏—Ç–∏ —à–≤–∏–¥–∫—ñ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É —Ç–∞ –≤—ñ–¥–≥—É–∫.

#### 7. **–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏** - –ù–ò–ó–¨–ö–ò–ô –ü–†–Ü–û–†–ò–¢–ï–¢
–ó–±–∏—Ä–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É.

### üìã –ü–ª–∞–Ω —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

#### –§–∞–∑–∞ 1: –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—ñ–π (2-3 —Ç–∏–∂–Ω—ñ)
- –°—Ç–≤–æ—Ä–∏—Ç–∏ `js/event-bus.js`
- –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –î–æ–¥–∞—Ç–∏ middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è

#### –§–∞–∑–∞ 2: –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (3-4 —Ç–∏–∂–Ω—ñ)
- –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
- –°—Ç–≤–æ—Ä–∏—Ç–∏ unit —Ç–µ—Å—Ç–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- –°—Ç–≤–æ—Ä–∏—Ç–∏ integration —Ç–µ—Å—Ç–∏

#### –§–∞–∑–∞ 3: –ü–æ–∫—Ä–∞—â–µ–Ω–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è (2-3 —Ç–∏–∂–Ω—ñ)
- –î–æ–¥–∞—Ç–∏ JSDoc –¥–æ –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∏–ø–∏ –¥–ª—è –≤—Å—ñ—Ö –æ–±'—î–∫—Ç—ñ–≤
- –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é API

### üéØ –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

–ü—ñ—Å–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤—Å—ñ—Ö –ø–æ–∫—Ä–∞—â–µ–Ω—å –æ—á—ñ–∫—É—î–º–æ:
- ‚úÖ **–ó–º–µ–Ω—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–æ–º–∏–ª–æ–∫** –Ω–∞ 60-80%
- ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ** –Ω–∞ 30-50%
- ‚úÖ **–ó–º–µ–Ω—à–µ–Ω–Ω—è —á–∞—Å—É —Ä–æ–∑—Ä–æ–±–∫–∏** –Ω–∞ 40-60%
- ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∫–æ–¥—É** –Ω–∞ 70-90%
- ‚úÖ **–ó–±—ñ–ª—å—à–µ–Ω–Ω—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ** –Ω–∞ 80-95%

–¶–µ–π –ø–ª–∞–Ω –∑–∞–±–µ–∑–ø–µ—á–∏—Ç—å –ø–æ—Å—Ç—É–ø–æ–≤–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ —Å—É—á–∞—Å–Ω–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ –±–µ–∑ –ø–æ—Ä—É—à–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –ø—Ä–∏ —Ü—å–æ–º—É –ø—Ä–æ—Å—Ç–æ—Ç—É —Ç–∞ –∑—Ä–æ–∑—É–º—ñ–ª—ñ—Å—Ç—å –∫–æ–¥—É. 