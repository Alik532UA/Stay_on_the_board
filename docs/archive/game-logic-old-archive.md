# Логіка гри "Stay on the Board"

## Основна концепція

**"Stay on the Board"** - це стратегічна гра, де мета полягає в тому, щоб якомога довше втримати фігуру на дошці, уникаючи виходу за її межі або потрапляння на недоступні клітинки.

## Правила гри

### Основні правила
1. **Початкова позиція**: Фігура (♛) розміщується випадково на дошці
2. **Чергування**: Гравці ходять по черзі
3. **Хід**: Гравець вибирає напрямок (8 можливостей) та відстань (1 до N-1 клітинок)
4. **Перемога**: Гравець, який залишиться на дошці довше, перемагає

### Умови поразки
Гравець програє, якщо:
- **Вихід за межі дошки**: хід виводить фігуру за межі дошки
- **Заблокована клітинка**: хід веде на заблоковану клітинку (в режимі заблокованих клітинок)
- **Неправильна заява**: гравець натискає "Немає ходів", але ходи є

### Умови перемоги
Гравець перемагає, якщо:
- **Правильна заява**: гравець натискає "Немає ходів" і дійсно ходів немає
- **Помилка суперника**: суперник робить недопустимий хід

## Механіка ходів

### Напрямки руху
Гравець може рухати фігуру в 8 напрямках:
```
7 8 9
4 ♛ 6
1 2 3
```

- **7**: вгору-ліворуч (↖)
- **8**: вгору (↑)
- **9**: вгору-праворуч (↗)
- **4**: ліворуч (←)
- **6**: праворуч (→)
- **1**: вниз-ліворуч (↙)
- **2**: вниз (↓)
- **3**: вниз-праворуч (↘)

### Відстань руху
- **Мінімальна**: 1 клітинка
- **Максимальна**: N-1 клітинок (де N - розмір дошки)
- **Приклад**: на дошці 5x5 можна рухатися на 1-4 клітинки

### Валідність ходу
Хід вважається валідним, якщо:
1. Нова позиція знаходиться в межах дошки
2. Нова позиція не є заблокованою клітинкою (в режимі заблокованих клітинок)

## Режими гри

### Звичайний режим
- Всі клітинки залишаються доступними після ходів
- Гра закінчується тільки при виході за межі дошки
- Простіший для початківців

### Режим заблокованих клітинок
- Клітинка, з якої зроблено хід, стає недоступною
- Заблоковані клітинки позначаються чорним кольором з червоним ✗
- Гра закінчується при:
  - Виході за межі дошки
  - Потраплянні на заблоковану клітинку
- Складніший стратегічний режим

## Система очок

### Підрахунок очок
- **1 очко** за кожен успішний хід
- **Фінальний рахунок** = кількість зроблених ходів
- **Вищий рахунок** = кращий результат

### Відображення
- Очки показуються в реальному часі
- Фінальний рахунок відображається в кінці гри
- Рахунок зберігається протягом однієї гри

## Кнопка "Немає ходів"

### Логіка роботи
1. **Перевірка**: система перевіряє всі можливі ходи
2. **Результат**:
   - **Якщо ходів немає**: гравець перемагає
   - **Якщо ходи є**: гравець програє

### Стратегічне використання
- Використовується, коли гравець вважає, що не може зробити жодного валідного ходу
- Ризикована стратегія - помилка призводить до поразки
- Може бути використана для швидкого завершення гри

## Алгоритм комп'ютера

### Логіка вибору ходу
1. **Аналіз**: комп'ютер отримує список всіх доступних ходів
2. **Вибір**: випадково вибирає один з валідних ходів
3. **Виконання**: виконує обраний хід

### Особливості
- **Випадковий вибір**: комп'ютер не використовує стратегію
- **Честна гра**: комп'ютер не має переваг
- **Передбачуваність**: ходи комп'ютера можна передбачити

## Розміри дошки

### Доступні розміри
- **Мінімальний**: 2x2
- **Максимальний**: 9x9
- **За замовчуванням**: 3x3

### Вплив розміру на гру
- **Менші дошки**: швидша гра, менше стратегії
- **Більші дошки**: повільніша гра, більше стратегії
- **Оптимальний**: 5x5 для балансу швидкості та стратегії

## Режими гри

### Гра з комп'ютером
- **Гравець vs Комп'ютер**
- Комп'ютер ходить після кожного ходу гравця
- Затримка 1 секунда між ходами комп'ютера

### Локальна гра
- **Гравець 1 vs Гравець 2**
- Гравці ходять по черзі на одному пристрої
- Можна ввести імена гравців

### Онлайн гра
- **Гравець vs Гравець через інтернет**
- Використовує PeerJS для P2P з'єднання
- Хост створює кімнату, гість приєднується

## Візуальні підказки

### Показ доступних ходів
- **Чекбокс "Показувати доступні ходи"**
- Показує галочки на всіх можливих клітинках
- Автоматично оновлюється після кожного ходу
- Допомагає планувати стратегію

### Центральна кнопка
- Показує вибраний напрямок та відстань
- Стає кнопкою підтвердження при повному виборі
- Показує хід комп'ютера після його виконання

## Клавіатурні скорочення

### Напрямки
- **NumPad**: 7-9, 4, 6, 1-3
- **Літери**: QWE (вгору), ASD (вниз), ZXC (альтернатива)

### Дії
- **Enter/Space/Num5**: підтвердити хід
- **Backspace**: немає ходів

## Стратегічні поради

### Загальні принципи
1. **Плануйте наперед**: думайте про наступні ходи
2. **Уникайте кутів**: кутові клітинки обмежують можливості
3. **Використовуйте центр**: центральні клітинки дають більше варіантів

### В режимі заблокованих клітинок
1. **Блокуйте стратегічно**: залишайте собі шляхи відступу
2. **Контролюйте простір**: не блокуйте всі шляхи одразу
3. **Плануйте довгостроково**: думайте про кінець гри

### Проти комп'ютера
1. **Використовуйте передбачуваність**: комп'ютер ходить випадково
2. **Створюйте пастки**: заманюйте комп'ютер в невигідні позиції
3. **Контролюйте центр**: центральні клітинки дають перевагу

## Технічна реалізація

### Структура даних
- **board**: двовимірний масив, що представляє дошку
- **blockedCells**: масив заблокованих позицій
- **points**: лічильник очок
- **isPlayerTurn**: чи черга гравця

### Функції перевірки
- **getAllValidMoves()**: отримує всі можливі ходи
- **hasValidMoves()**: перевіряє чи є ходи
- **findPiece()**: знаходить позицію фігури

### Обробка ходів
- **processPlayerMove()**: обробляє хід гравця
- **computerMove()**: виконує хід комп'ютера
- **endGame()**: завершує гру 