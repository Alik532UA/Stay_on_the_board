# Message template for communicating with AI
🔴🟠🟡🟢🔵🟣⚫️⚪️🟤
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
Актуальний результат: 
Очікуваний результат: 
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
Покращ ui та ux
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
це сталося після @git-changes
після провадження @/docs/plans/architecture-improvement-plan-v19.md 
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
проаналізуй @/docs/plans/architecture-improvement-plan-v19.md 
проаналізуй @git-changes
перевір що вже зроблено та відміть чекбоксам
Продовжуй виконувати план
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
продовжуй
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
C:/Users/ozapolnov/Documents/code/study/gemini-proxy/venv/Scripts/Activate.ps1
./venv/Scripts/Activate.ps1
python proxy_server.py
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
npm run check
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
npm run check
npm test -- tests/ssr-initialization.test.ts
npx playwright test tests/game-page-startup.test.ts
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
npx playwright test --headed
npx playwright test --grep "@GF-1"

npx playwright test tests/game-mode-modal.spec.ts
npx playwright test tests/game-flow.spec.ts --headed
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
Роби як вважаєш буде краще для проєкту
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
1. Проаналізуй всі файли документації
2. Реорганізуй їх по папках, зроби рефакторінг назв файлів
3. Видали застарілі, об'єднай ті що треба об'єднати, розділи ті що треба розділити, тобто зроби генеральне прибирання
4. Покращ документацію
5. всі виконані improvement та plan треба помістити в якусь папку done
6. для всіх фалів md та txt розробити єдину структуру, наприклад: тип, статус, назва, опис
7. Додай в усі баг репорти в папці done, додай статус "виконано"
підготуй md файл для курсор
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
в плані додай чекбокси та відміть те що вже зроблено, тобто актуалізуй план
"architecture-improvement-plan-v3.md"
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
Що протестувати після цих змін?
Які частини логіки ми зачепили, і що в теорії могло поламатися?
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
розпиши детальний покроковий план в md
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
вже декілька разів ця проблема ставалось і декілька разів ми її виправляли
потрібно навколо цієї проблеми зробити рефакторінг, щоб все було написано правильно, щоб після чергового рефакторінгу, ця помилка не повернулась
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
ти використав багато спроб, але проблема досі є.
тож скористайся:
3.  **Реалізація:** Напиши код, дотримуючись архітектурних принципів та стандартів кодування.
4.  **Відладка (Дебагінг):**
    *   **Використовуй `logService`:** Замість `console.log` завжди використовуй централізований `logService`.
    *   **Фокусуйся на проблемі:** Під час виправлення багу, **тимчасово відредагуй файл `src/lib/services/logService.js`**. Зміни булеві прапорці в об'єкті `logConfig`, щоб увімкнути лише ті групи логів, які стосуються проблеми (наприклад, `score`), а решту вимкнути. Це допоможе усунути інформаційний шум.
    *   **Незмінність логів:** Параметри логування не змінюй, доки розробник не підтвердить, що баг виправлено.
5.  **Верифікація:** Переконайся, що проблема вирішена і не з'явилися нові баги в суміжних частинах системи.
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
Створи файл `architecture-improvement-plan-v22.md` в папці "\Stay_on_the_board\docs\plans"
у першій частині:
Проведи комплексний аудит коду за наступними критеріями:

**Архітектура та Структура:**
1.  **SSoT (Single Source of Truth):** Чи є єдине джерело правди для кожного елемента стану?
2.  **UDF (Unidirectional Data Flow):** Чи є потік даних односпрямованим та передбачуваним?
3.  **SoC (Separation of Concerns):** Наскільки добре розділені відповідальності (стан, логіка, UI)?
4.  **Композиція:** Чи ефективно використовуються компоненти для побудови UI?
5.  **Чистота та Побічні ефекти:** Наскільки добре ізольовані "нечисті" операції (API, DOM, таймери)?

**Якість Коду та Реалізації:**
6.  **DRY (Don't Repeat Yourself):** Чи є дублювання коду, яке можна усунути?
7.  **Простота та Читабельність (KISS):** Чи є надмірно складні рішення? Наскільки код зрозумілий (якість іменування)?
8.  **Продуктивність:** Чи є потенційні проблеми зі швидкістю (зайві обчислення, перерендери)?
9.  **Документація та Коментарі:** Чи коментарі пояснюють *навіщо*, а не *що*?

Вистави оцінку від 0 до 100 по кожному з пунктів 

у другій частині:
випиши пункти для покращення
випиши список проблем і розтав по пріоритету, напроти кожної задачі вистав на скільки важливо це треба зробити де 0 = не важливо, 100 = без цього далі працювати не буде

ціль: треба підготувати код до масштабування, а саме:
1. до додавання редагування логіки режимів та таймера. детальніше тут: @/docs/plans/modes-and-timer-logic-plan.md 
2. до майбутнього розширення ігрових режимів: "Гра онлайн" детальніше тут: @/docs/plans/Migrating-to-Firebase-for-online-mode.md
3. до додавання ситеми нагород. детальніше тут: @/docs/plans/rewards-plan.md 

в плані використовуй чекбокси для того щоб можна було відмічати пункти які вже зроблено

надважливе завдання не поламати логіку:
1. візуалізація дошки "game-board" не повинна впливати на "center-info" та на логіку гри
2. "center-info" та логіка гри не повинна знати про візуалізація дошки "game-board"
логіка гри не повинна знати та залежати від візуалізації на дошці
надважливе завдання: взяти до уваги попередження коді (в коментаріях) щодо логіки яка може зламатися під час рефакторінгу
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
Створи файл `architecture-improvement-SoC-plan-v21.md` в папці "\Stay_on_the_board\docs\plans"
у першій частині:
Проведи комплексний аудит коду за критерієм:
**SoC (Separation of Concerns):** Наскільки добре розділені відповідальності (стан, логіка, UI)?

Вистави оцінку від 0 до 100 поточному стану проекта по цьому критерію 

у другій частині:
випиши пункти для покращення
випиши список проблем і розтав по пріоритету, напроти кожної задачі вистав на скільки важливо це треба зробити де 0 = не важливо, 100 = без цього далі працювати не буде

ціль: треба підготувати код до масштабування, а саме:
1. до додавання редагування логіки режимів та таймера. детальніше тут: @/docs/plans/modes-and-timer-logic-plan.md 
2. до майбутнього розширення ігрових режимів: "Гра онлайн" детальніше тут: @/docs/plans/Migrating-to-Firebase-for-online-mode.md
3. до додавання ситеми нагород. детальніше тут: @/docs/plans/rewards-plan.md 

в плані використовуй чекбокси для того щоб можна було відмічати пункти які вже зроблено

надважливе завдання не поламати логіку:
1. візуалізація дошки "game-board" не повинна впливати на "center-info" та на логіку гри
2. "center-info" та логіка гри не повинна знати про візуалізація дошки "game-board"
логіка гри не повинна знати та залежати від візуалізації на дошці
надважливе завдання: взяти до уваги попередження коді (в коментаріях) щодо логіки яка може зламатися під час рефакторінгу
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
Твоє рішення має бути комплексним. Не роби поверхневих виправлень ("латок" чи "костилів").
**Реалізуй системне виправлення**, яке усуває корінь проблеми та відповідає цільовій архітектурі проєкту.
при виправленні використовуй принципи:
1.  **SSoT (Single Source of Truth):** Чи є єдине джерело правди для кожного елемента стану?
2.  **UDF (Unidirectional Data Flow):** Чи є потік даних односпрямованим та передбачуваним?
3.  **SoC (Separation of Concerns):** Наскільки добре розділені відповідальності (стан, логіка, UI)?
4.  **Композиція:** Чи ефективно використовуються компоненти для побудови UI?
5.  **Чистота та Побічні ефекти:** Наскільки добре ізольовані "нечисті" операції (API, DOM, таймери)?
6.  **DRY (Don't Repeat Yourself):** Чи є дублювання коду, яке можна усунути?
7.  **Простота та Читабельність (KISS):** Чи є надмірно складні рішення? Наскільки код зрозумілий (якість іменування)?
8.  **Продуктивність:** Чи є потенційні проблеми зі швидкістю (зайві обчислення, перерендери)?
9.  **Документація та Коментарі:** Чи коментарі пояснюють *навіщо*, а не *що*?
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
**Ключова вимога:** Твоє рішення має бути комплексним. Не роби поверхневих виправлень ("латок" чи "костилів"). Замість цього:
1.  **Проаналізуй першопричину** проблеми.
2.  **Перевір зв'язок** з задачами в архітектурному плані: `@/docs/plans/architecture-improvement-plan-v14.md`.
3.  **Реалізуй системне виправлення**, яке усуває корінь проблеми та відповідає цільовій архітектурі проєкту.
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
**Протокол дій при падінні автотесту:**

1.  **Зупинись.** Не намагайся одразу виправляти код.
2.  **Проаналізуй помилку,** щоб зрозуміти, яка саме поведінка перевірялася.
3.  **Запитай мене.** Сформулюй питання у форматі:
    "Автотест `[Назва тесту]` не пройшов з помилкою: `[Короткий опис помилки]`. Будь ласка, перевір вручну в браузері, чи є ця поведінка багом. Дай відповідь одним з двох варіантів:
    *   `Тест правий` (якщо в браузері є баг)
    *   `Код правий` (якщо в браузері все працює, а тест застарів)"
4.  **Чекай моєї відповіді** і дій згідно з нею.
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
проаналізуй всі плани: architecture-improvement-plan-v№.md
після реалізації кожного з планів від 30% до 80% функціоналу гри перестає працювати
автотести ті що перевіряються функції, не допомагають, бо коли у мене пів програми не працює автотести показуються, що все добре.
автотести ми як рішення не розглядаємо
а ще оцінки архітектури та коду не стають значно кращіми, а іноді і гіршими
бо ми вже виконали десятки планів, а оцінка все одно приблизно від 60 до 80
які є варіанти вирішення цієї проблеми?
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
p.s.занеси цю перевірку в чекліст
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
@git-changes перевір що стало краще а що гірше.
Оціни кожен пункт від 0 до 100 балів до змін та після змін.
чи ми не порушували принципи:
1.  **SSoT (Single Source of Truth):** Чи є єдине джерело правди для кожного елемента стану?
2.  **UDF (Unidirectional Data Flow):** Чи є потік даних односпрямованим та передбачуваним?
3.  **SoC (Separation of Concerns):** Наскільки добре розділені відповідальності (стан, логіка, UI)?
4.  **Композиція:** Чи ефективно використовуються компоненти для побудови UI?
5.  **Чистота та Побічні ефекти:** Наскільки добре ізольовані "нечисті" операції (API, DOM, таймери)?
6.  **DRY (Don't Repeat Yourself):** Чи є дублювання коду, яке можна усунути?
7.  **Простота та Читабельність (KISS):** Чи є надмірно складні рішення? Наскільки код зрозумілий (якість іменування)?
8.  **Продуктивність:** Чи є потенційні проблеми зі швидкістю (зайві обчислення, перерендери)?
9.  **Документація та Коментарі:** Чи коментарі пояснюють *навіщо*, а не *що*?
---
**Мова**: мова роздумів та відповіді в чаті лише українська. Англійською не пиши, а заощаджуй токени.
**Опис дії**: Перейди на стислий режим: мінімум пояснень (приблизно до 200 символів, але бажано 30-70 символів), максимум дій.
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
не пиши інтрукцію, а пиши повний виправлений код
🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠🟠
