# План покращення архітектури v6

## 1. Комплексний аудит коду

### Архітектура та Структура
| Критерій | Оцінка (0-100) | Коментар |
|---|---|---|
| **1. SSoT (Single Source of Truth)** | 78 | Основний стан зберігається у Svelte stores, але є дублювання у деяких компонентах та derived-станах. |
| **2. UDF (Unidirectional Data Flow)** | 85 | Потік даних здебільшого односпрямований, але є місця з двосторонньою взаємодією між UI та логікою. |
| **3. SoC (Separation of Concerns)** | 75 | Відповідальності розділені, але деякі компоненти містять і логіку, і UI, і роботу зі станом. |
| **4. Композиція** | 82 | Компоненти використовуються ефективно, але є місця для покращення повторного використання. |
| **5. Чистота та Побічні ефекти** | 70 | Побічні ефекти (таймери, API) не завжди ізольовані у сервісах або ефектах. |

### Якість Коду та Реалізації
| Критерій | Оцінка (0-100) | Коментар |
|---|---|---|
| **6. DRY (Don't Repeat Yourself)** | 74 | Є дублювання логіки у компонентах та утилітах. |
| **7. Простота та Читабельність (KISS)** | 80 | Код загалом зрозумілий, але є складні ділянки з багаторівневою логікою. |
| **8. Продуктивність** | 77 | Можливі зайві перерендери через неефективне оновлення стану. |
| **9. Документація та Коментарі** | 68 | Коментарі часто описують "що", а не "навіщо"; є попередження щодо потенційних проблем при рефакторингу. |

---

## 2. Пункти для покращення

- [ ] Усунути дублювання стану між компонентами та stores (SSoT)
- [ ] Забезпечити односпрямований потік даних у всіх компонентах (UDF)
- [ ] Винести побічні ефекти у сервіси/ефекти, ізолювати від UI
- [ ] Розділити логіку, стан та UI у компонентах (SoC)
- [ ] Покращити композицію компонентів для повторного використання
- [ ] Усунути дублювання коду (DRY)
- [ ] Спростити складні ділянки коду, покращити іменування (KISS)
- [ ] Оптимізувати оновлення стану для уникнення зайвих перерендерів
- [ ] Оновити коментарі: пояснювати "навіщо", а не "що"; врахувати всі попередження щодо логіки

---

## 3. Список проблем і пріоритетів

| Проблема | Пріоритет (0-100) |
|---|---|
| Візуалізація дошки "game-board" впливає на "center-info" або логіку гри | 100 |
| "center-info" або логіка гри знає про візуалізацію дошки | 100 |
| Дублювання стану між stores і компонентами | 90 |
| Побічні ефекти не ізольовані (таймери, API) | 85 |
| Дублювання коду в утилітах/компонентах | 80 |
| Складна, заплутана логіка у компонентах | 80 |
| Неоптимальні оновлення стану, зайві перерендери | 75 |
| Недостатня документація "навіщо" та ігнорування попереджень у коментарях | 70 |
| Недостатня композиція компонентів | 65 |

---

## 4. Надважливі завдання

- [ ] Візуалізація дошки "game-board" **не повинна впливати** на "center-info" та логіку гри
- [ ] "center-info" та логіка гри **не повинні знати** про візуалізацію дошки "game-board"
- [ ] Логіка гри **не повинна знати та залежати** від візуалізації на дошці
- [ ] Врахувати всі попередження у коментарях щодо логіки, яка може зламатися під час рефакторингу

> **Мета:** Підготувати код до масштабування для майбутнього розширення ігрових режимів: "Локальна гра" та "Гра онлайн". 