# Архітектурний аудит та план покращення v4

## Частина 1. Комплексний аудит коду

### Архітектура та Структура
1. **SSoT (Single Source of Truth):**  80/100
   - В цілому, більшість станів мають єдине джерело, але є окремі дублювання (наприклад, дубльований стан у візуалізації та логіці).
2. **UDF (Unidirectional Data Flow):**  85/100
   - Потік даних здебільшого односпрямований, але є місця з двосторонньою залежністю між компонентами.
3. **SoC (Separation of Concerns):**  75/100
   - Відповідальності розділені, але деякі компоненти містять і логіку, і UI, і стан.
4. **Композиція:**  80/100
   - Компоненти використовуються ефективно, але є місця для покращення повторного використання.
5. **Чистота та Побічні ефекти:**  70/100
   - Побічні ефекти не завжди ізольовані, є прямі звернення до DOM та таймерів у логіці.

### Якість Коду та Реалізації
6. **DRY (Don't Repeat Yourself):**  75/100
   - Є дублювання коду, особливо у відображенні стану та логіці обробки подій.
7. **Простота та Читабельність (KISS):**  80/100
   - Код загалом простий, але є складні ділянки з неочевидною логікою та іменуванням.
8. **Продуктивність:**  85/100
   - Потенційних проблем зі швидкістю небагато, але є зайві перерендери та обчислення у складних компонентах.
9. **Документація та Коментарі:**  70/100
   - Коментарі часто описують "що", а не "навіщо"; документація потребує доповнення.

---

## Частина 2. План покращення та пріоритети

### Основні напрямки для покращення
- [x] Усунути дублювання стану між логікою та візуалізацією
- [x] Посилити розділення відповідальностей (SoC) між логікою, UI та станом <!-- Аудит: логіка, UI та стан розділені; побічні ефекти у UI не впливають на логіку гри. -->
- [x] Винести побічні ефекти (таймери, DOM) у окремі сервіси/стори
- [x] Покращити повторне використання компонентів (композиція) <!-- SvgIcons, FAQModal, DontShowAgainCheckbox, FloatingBackButton, Button тощо вже використовуються як спільні компоненти. Дублювання мінімальне. -->
- [x] Зменшити дублювання коду (DRY)
- [x] Спрощення складних ділянок коду, покращення іменування (KISS)
- [x] Оптимізувати перерендери та обчислення
- [x] Оновити коментарі: пояснювати "навіщо", а не "що"
- [x] Перевірити всі попередження у коментарях щодо потенційних проблем при рефакторингу

### Список проблем та пріоритетів
- [x] **Візуалізація дошки не повинна впливати на center-info та логіку гри** — 100
- [x] **Center-info та логіка гри не повинні знати про візуалізацію дошки** — 100
- [x] **Логіка гри не повинна залежати від візуалізації** — 100
- [x] **Врахувати всі попередження у коментарях щодо логіки** — 100
- [x] Дублювання стану між логікою та UI — 90
- [x] Побічні ефекти не ізольовані — 85
- [x] Дублювання коду у відображенні та обробці подій — 80
- [x] Складні ділянки коду, неочевидне іменування — 75
- [x] Недостатня документація та коментарі — 70
- [x] Зайві перерендери у складних компонентах — 65

---

### Ціль
> Підготувати код до масштабування для майбутнього розширення ігрових режимів: "Локальна гра" та "Гра онлайн".

**Надважливе:**
- Не поламати логіку!
- Візуалізація дошки (game-board) не повинна впливати на center-info та логіку гри
- Center-info та логіка гри не повинні знати про візуалізацію дошки
- Логіка гри не повинна знати та залежати від візуалізації на дошці
- Врахувати всі попередження у коментарях щодо логіки, яка може зламатися під час рефакторингу 