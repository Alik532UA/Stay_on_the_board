# План реалізації голосового керування

## 1. Мета

Додати можливість керувати фішкою в грі за допомогою голосових команд як альтернативу кнопкам.

## 2. План реалізації

### Крок 1: Створення кнопки для активації голосового вводу

- [ ] **Файл:** `src/lib/components/widgets/DirectionControls.svelte`
- [ ] **Завдання:**
    - В контейнер з класом `action-btns` додати нову кнопку.
    - Кнопка повинна мати іконку мікрофона (наприклад, `<SvgIcons name="microphone" />`).
    - Кнопка буде вмикати/вимикати режим прослуховування команд.
    - Додати візуальний індикатор активного режиму прослуховування (наприклад, зміна кольору кнопки).

### Крок 2: Створення сервісу для розпізнавання мови

- [ ] **Файл:** `src/lib/services/voiceControlService.ts`
- [ ] **Завдання:**
    - Створити новий сервіс `voiceControlService`.
    - Використати Web Speech API (`SpeechRecognition`) для доступу до мікрофона та перетворення мови в текст.
    - Реалізувати методи:
        - `startListening()`: Починає прослуховування.
        - `stopListening()`: Зупиняє прослуховування.
        - `toggleListening()`: Перемикає режим.
    - Додати обробник результатів, який буде отримувати розпізнаний текст.

### Крок 3: Розробка логіки аналізу команд

- [ ] **Файл:** `src/lib/services/voiceControlService.ts`
- [ ] **Завдання:**
    - В сервісі розпізнавання мови створити функцію для аналізу тексту команди.
    - Функція повинна вміти виділяти з тексту **напрямок** та **відстань**.
    - **Приклади команд:** "вгору 3", "вправо 1", "вниз-вліво 2".
    - Передбачити підтримку синонімів та різних форм слів для всіх мов, що підтримуються в грі (uk, en, crh, nl).
    - Створити словники команд для кожної мови.

### Крок 4: Інтеграція з ігровою логікою

- [ ] **Файл:** `src/lib/services/voiceControlService.ts`
- [ ] **Завдання:**
    - Після успішного аналізу команди, викликати існуючий метод `userActionService.executeMove(direction, distance)`, передаючи в нього отримані дані.

### Крок 5: Управління станом

- [ ] **Файл:** `src/lib/stores/uiStateStore.ts`
- [ ] **Завдання:**
    - Додати новий прапорець `isListening: boolean` до `uiStateStore`.
    - Кнопка голосового вводу буде реагувати на зміну цього стану для оновлення свого вигляду.
    - Сервіс `voiceControlService` буде оновлювати цей стан при запуску/зупинці прослуховування.

## 3. Примітки

- На першому етапі реалізація не включатиме додатковий зворотний зв'язок (відображення розпізнаного тексту, звукові ефекти). Основна мета - реалізувати базову функціональність.
- Тестування потрібно буде проводити в браузерах, що підтримують Web Speech API (наприклад, Chrome).
