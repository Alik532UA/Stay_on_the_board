Звісно, ось детальний покроковий план для завершення рефакторингу та очищення проєкту від застарілих файлів.

# План завершення рефакторингу та очищення проєкту

**Мета:** Видалити застарілі файли, які були замінені в процесі переходу на нову архітектуру (сервіси, віджети, обчислювані стори). Це зменшить кількість коду, усуне плутанину та забезпечить, що проєкт покладається виключно на нову, більш структуровану логіку.

**Важливо:** Перед видаленням файлів критично важливо переконатися, що проєкт проходить усі перевірки типів, щоб уникнути помилок, пов'язаних із застарілими імпортами.

---

### Крок 1: Перевірка якості коду

Цей крок є запобіжним заходом. Запуск перевірки типів допоможе виявити будь-які залишкові імпорти зі старих файлів ще до їх фізичного видалення.

- [ ] **Запустити команду перевірки типів.**
    Відкрийте термінал у кореневій папці проєкту та виконайте команду:
    ```bash
    npm run check
    ```

- [ ] **Проаналізувати результат.**
    - **Очікуваний результат:** У консолі з'явиться повідомлення `✔ No errors found`.
    - **Якщо є помилки:** Не продовжуйте видалення файлів. Спочатку виправте всі помилки, які показує `svelte-check`. Ймовірно, це будуть імпорти з файлів, які ви плануєте видалити. Замініть їх на імпорти з нових сервісів та сторів.

---

### Крок 2: Видалення застарілих файлів логіки

Ці файли містили основну логіку гри, яка тепер централізована у `gameLogicService.ts` та `gameOrchestrator.js`.

- [ ] **Видалити `src/lib/gameCore.ts`**
    - **Причина:** Усі чисті функції з цього файлу (наприклад, `getAvailableMoves`, `createEmptyBoard`) були перенесені до `src/lib/services/gameLogicService.ts`.
    - **Дія:** Видаліть файл `src/lib/gameCore.ts`.

- [ ] **Видалити `src/lib/stores/gameActions.ts`**
    - **Причина:** Функції-мутатори стану (наприклад, `resetGame`, `setDirection`) були перенесені як методи до `src/lib/services/gameLogicService.ts`.
    - **Дія:** Видаліть файл `src/lib/stores/gameActions.ts`.

- [ ] **Верифікація після видалення:**
    - Запустіть `npm run check` ще раз, щоб переконатися, що жоден файл не намагається імпортувати щось із видалених модулів.

---

### Крок 3: Видалення застарілих сервісів та утиліт

Ці файли були замінені на нові сервіси з більш чіткими іменами та структурою.

- [ ] **Видалити `src/lib/stores/audioStore.js`**
    - **Причина:** Функціональність була перенесена до `src/lib/services/audioService.js`.
    - **Дія:** Видаліть файл `src/lib/stores/audioStore.js`.

- [ ] **Видалити `src/lib/utils/navigation.js`**
    - **Причина:** Функціональність була перенесена до `src/lib/services/navigationService.js`.
    - **Дія:** Видаліть файл `src/lib/utils/navigation.js`.

- [ ] **Верифікація після видалення:**
    - Запустіть `npm run check`.
    - **Додатково:** Швидко перевірте роботу звуку та навігації в застосунку.

---

### Крок 4: Видалення застарілих компонентів

Ці компоненти були монолітними та були замінені на нову, гнучку систему віджетів.

- [ ] **Видалити `src/components/GameControls.svelte`**
    - **Причина:** Цей компонент був повністю замінений на `src/lib/components/widgets/ControlsPanelWidget.svelte`, який є частиною нової системи віджетів.
    - **Дія:** Видаліть файл `src/components/GameControls.svelte`.

- [ ] **Видалити `src/lib/components/GameBoard.svelte`**
    - **Причина:** Цей компонент був розбитий на декілька віджетів (`BoardWrapperWidget`, `TopRowWidget`, `ScorePanelWidget` тощо), які тепер керуються через `DraggableColumns.svelte`.
    - **Дія:** Видаліть файл `src/lib/components/GameBoard.svelte`.

- [ ] **Верифікація після видалення:**
    - Запустіть `npm run check`.
    - **Критично важливо:** Запустіть гру (`npm run dev`) та перейдіть на сторінку `/game`. Переконайтеся, що ігровий інтерфейс (дошка, панель керування, налаштування) відображається та працює коректно.

---

### Крок 5: Фінальна перевірка

Після завершення всіх видалень проведіть фінальний "smoke test", щоб переконатися, що основний функціонал гри не постраждав.

- [ ] **Запустіть гру та перевірте:**
    - Запуск нової гри з головного меню.
    - Процес ходу гравця та комп'ютера.
    - Роботу всіх елементів у панелі налаштувань (зміна розміру дошки, перемикання режимів).
    - Коректне завершення гри та відображення модального вікна з результатами.

Після виконання цих кроків проєкт буде значно чистішим, а його структура стане більш зрозумілою та готовою до подальшого розширення.