Баг репорт #10: Чекбокс "Показувати доступні ходи" не синхронізується з показом ходів при старті гри

Дата: 15.01.2025
Пріоритет: Високий
Статус: Виправлено

ОПИС ПРОБЛЕМИ:
При заході в гру чекбокс "Показувати доступні ходи" відображається як увімкнений (згідно з налаштуваннями), але фактично доступні ходи не показуються на дошці. Щоб ходи почали показуватися, потрібно вимкнути і знову увімкнути чекбокс.

ДОДАТКОВА ІНФОРМАЦІЯ:
Проблема виникає через розсинхронізацію між станом налаштувань (settings.showMoves) та станом гри (game.showingAvailableMoves). При старті гри компоненти не синхронізуються правильно.

КРОКИ ДЛЯ ВІДТВОРЕННЯ:
1. Зайти в гру
2. Перевірити, що чекбокс "Показувати доступні ходи" увімкнений
3. Подивитися на дошку

Очікуваний результат: доступні ходи одразу показуються на дошці як підсвічені клітинки.

Фактичний результат: доступні ходи не показуються, незважаючи на увімкнений чекбокс.

ТЕХНІЧНІ ДЕТАЛІ:
- Проблема в тому, що стан game.showingAvailableMoves не синхронізується з settings.showMoves при старті гри
- Компоненти GameBoardComponent та GameControlsComponent не оновлюються синхронно
- Потрібно додати синхронізацію між налаштуваннями та станом гри
- Потрібно оновлювати компоненти при зміні налаштувань

ВИПРАВЛЕННЯ:
1. Додано синхронізацію в GameControlsComponent.render() - перевірка та синхронізація game.showingAvailableMoves з settings.showMoves
2. Додано оновлення чекбокса в підписці на settings.showMoves та синхронізацію стану гри
3. Додано синхронізацію в GameBoardComponent.render() з викликом toggleAvailableMoves
4. Додано додаткову перевірку в GameLogic.onGameStart() з викликом toggleAvailableMoves
5. Додано підписку на settings.showMoves в GameBoardComponent з синхронізацією стану
6. Додано метод syncCheckboxWithSettings() в GameControlsComponent для примусової синхронізації
7. Покращено toggleAvailableMoves() для кращого оновлення підсвічування
8. Додано виклики syncCheckboxWithSettings() в ключових місцях для гарантованої синхронізації

РЕЗУЛЬТАТ:
Тепер при старті гри чекбокс "Показувати доступні ходи" правильно синхронізується з показом ходів на дошці. Доступні ходи одразу відображаються як підсвічені клітинки, якщо налаштування увімкнено. 