import"../chunks/NZTpNUN0.js";import{e as Vt,u as Nt,r as Dt,ah as Xt,aX as Yt,aY as Zt,b as r,W as $t,aZ as te,aG as ee,an as ae,f as L,at as E,ao as nt,ap as q,a as j,aq as re,a_ as se,au as oe,ar as T,aN as g,as as P,aO as Z,s as bt}from"../chunks/DkAQ08SX.js";import{o as ne,d as ie,e as le,b as Q}from"../chunks/DCrgGPSf.js";import{i as K}from"../chunks/BkoW8gQq.js";import{e as $,i as ce}from"../chunks/kRmKmQfP.js";import{h as de}from"../chunks/CwVJfopI.js";import{r as ue,b as ht,s as gt}from"../chunks/DaICS9qX.js";import{s as V,c as ve}from"../chunks/Lb49Z6ie.js";import{p as fe}from"../chunks/BOVPpjKW.js";import{i as pe,b as me,c as ye,d as be}from"../chunks/RpvhV9aW.js";function _t(e,t,l){Vt(()=>{var i=Nt(()=>t(e,l?.())||{});if(l&&i?.update){var o=!1,f={};Dt(()=>{var d=l();Xt(d),o&&Yt(f,d)&&(f=d,i.update(d))}),o=!0}if(i?.destroy)return()=>i.destroy()})}function he(e){let t=0,l=$t(0),i;return()=>{Zt()&&(r(l),Dt(()=>(t===0&&(i=Nt(()=>e(()=>te(l)))),t+=1,()=>{ee().then(()=>{t-=1,t===0&&(i?.(),i=void 0)})})))}}function ge(e){const t=JSON.parse(e);return t.data&&(t.data=ye(t.data,be.decoders)),t}function it(e){return HTMLElement.prototype.cloneNode.call(e)}function _e(e,t=()=>{}){const l=async({action:o,result:f,reset:d=!0,invalidateAll:m=!0})=>{f.type==="success"&&(d&&HTMLFormElement.prototype.reset.call(e),m&&await pe()),(location.origin+location.pathname===o.origin+o.pathname||f.type==="redirect"||f.type==="error")&&await me(f)};async function i(o){if((o.submitter?.hasAttribute("formmethod")?o.submitter.formMethod:it(e).method)!=="post")return;o.preventDefault();const d=new URL(o.submitter?.hasAttribute("formaction")?o.submitter.formAction:it(e).action),m=o.submitter?.hasAttribute("formenctype")?o.submitter.formEnctype:it(e).enctype,_=new FormData(e),C=o.submitter?.getAttribute("name");C&&_.append(C,o.submitter?.getAttribute("value")??"");const D=new AbortController;let F=!1;const z=await t({action:d,cancel:()=>F=!0,controller:D,formData:_,formElement:e,submitter:o.submitter})??l;if(F)return;let x;try{const w=new Headers({accept:"application/json","x-sveltekit-action":"true"});m!=="multipart/form-data"&&w.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(m)?m:"application/x-www-form-urlencoded");const J=m==="multipart/form-data"?_:new URLSearchParams(_),H=await fetch(d,{method:"POST",headers:w,cache:"no-store",body:J,signal:D.signal});x=ge(await H.text()),x.type==="error"&&(x.status=H.status)}catch(w){if(w?.name==="AbortError")return;x={type:"error",error:w}}await z({action:d,formData:_,formElement:e,update:w=>l({action:d,result:x,reset:w?.reset,invalidateAll:w?.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",i)}}}var xt="mz3PUW_p",wt=["#FFC700","#FF0000","#2E3191","#41BBC7"],kt=3500,jt=.5,At=150,Pt="mix",zt=12,St="",Wt=!0,Et=800,Mt=1600;function xe(e,t={}){let{colors:l=wt,duration:i=kt,force:o=jt,particleCount:f=At,particleShape:d=Pt,particleSize:m=zt,particleClass:_=St,destroyAfterDone:C=Wt,stageHeight:D=Et,stageWidth:F=Mt}=t;(function(c){if(document.querySelector("style[data-neoconfetti]"))return;const p=lt("style");p.dataset.neoconfetti="",p.textContent=c,ct(document.head,p)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),e.classList.add("mz3PUW_c"),e.style.setProperty("--sh",D+"px");let U=[],z=[];const x=()=>X(M()*(Pe-1)),w=(c,p)=>d!=="rectangles"&&(c==="circles"||ze(p));function J(c,p){const W=x(),s=w(d,W),a=(y,h)=>c.style.setProperty(y,h+"");a("--xlp",dt(tt(Tt(p,90)-180),0,180,-F/2,F/2)+"px"),a("--dc",i-X(1e3*M())+"ms");const n=M()<ke?G(M()*je,2):0;a("--x1",n),a("--x2",-1*n),a("--x3",n),a("--x4",G(tt(dt(tt(Tt(p,90)-180),0,180,-1,1)),4)),a("--y1",G(M()*Ut,4)),a("--y2",G(M()*o*(Ot()?1:-1),4)),a("--y3",Ut),a("--y4",G(Ae(dt(tt(p-180),0,180,o,-o),0),4)),a("--w",(s?m:X(4*M())+m/2)+"px"),a("--h",(s?m:X(2*M())+m)+"px");const u=W.toString(2).padStart(3,"0").split("");a("--hr",u.map(y=>+y/2+"").join(" ")),a("--r",u.join(" ")),a("--rd",G(M()*(we-Lt)+Lt)+"ms"),a("--br",s?"50%":0)}let H;function Y(){e.innerHTML="",clearTimeout(H),U=Ht(f,l),z=function(c,p=[],W){const s=[];for(const{color:a}of p){const n=lt("div");n.className=`${xt} ${W}`,n.style.setProperty("--bgc",a);const u=lt("div");ct(n,u),ct(c,n),s.push(n)}return s}(e,U,_);for(const[c,p]of Ct(z))J(p,U[+c].degree);H=setTimeout(()=>{C&&(e.innerHTML="")},i)}return Y(),{update(c){const p=c.particleCount??At,W=c.particleShape??Pt,s=c.particleSize??zt,a=c.particleClass??St,n=c.colors??wt,u=c.stageHeight??Et,y=c.duration??kt,h=c.force??jt,v=c.stageWidth??Mt,S=c.destroyAfterDone??Wt;U=Ht(p,n);let k=!1;if(p===f){z=Array.from(e.querySelectorAll(`.${xt}`));for(const[O,{color:A}]of Ct(U)){const b=z[+O];JSON.stringify(l)!==JSON.stringify(n)&&b.style.setProperty("--bgc",A),W!==d&&b.style.setProperty("--br",w(W,x())?"50%":"0"),a!==_&&(_&&b.classList.remove(_),a&&b.classList.add(a))}}else k=!0;C&&!S&&clearTimeout(H),e.style.setProperty("--sh",u+"px"),i=y,l=n,o=h,f=p,d=W,m=s,_=a,C=S,D=u,F=v,k&&Y()},destroy(){e.innerHTML="",clearTimeout(H)}}}var Lt=200,we=800,ke=.1,je=.3,Ut=.5,tt=Math.abs,M=Math.random,X=Math.round,Ae=Math.max,lt=e=>document.createElement(e),ct=(e,t)=>e.appendChild(t),Ht=(e,t)=>Array.from({length:e},(l,i)=>({color:t[i%t.length],degree:360*i/e})),G=(e,t=2)=>X((e+Number.EPSILON)*10**t)/10**t,dt=(e,t,l,i,o)=>(e-t)*(o-i)/(l-t)+i,Tt=(e,t)=>e+t>360?e+t-360:e+t,Ot=()=>M()>.5,Ct=Object.entries,Pe=6,ze=e=>e!==1&&Ot();class Se{#t;#e;constructor(t,l){this.#t=t,this.#e=he(l)}get current(){return this.#e(),this.#t()}}const We=/\(.+\)/,Ee=new Set(["all","print","screen","and","or","not","only"]);class Me extends Se{constructor(t,l){let i=We.test(t)||t.split(/[\s,]+/).some(f=>Ee.has(f.trim()))?t:`(${t})`;const o=window.matchMedia(i);super(()=>o.matches,f=>ne(o,"change",f))}}function Ft(e,t,l){e.preventDefault();const i=e.target.getAttribute("data-key");i==="backspace"?(bt(t,r(t).slice(0,-1)),l()?.badGuess&&l(l().badGuess=!1,!0)):r(t).length<5&&bt(t,r(t)+i)}var Le=L('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l"/>'),Ue=L('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"/></div>'),He=L('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Te=L('<p class="svelte-1pg2j5l"> </p>'),Ce=L('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Fe=L('<button formaction="?/update" name="key"> </button>'),Ne=L('<div class="row svelte-1pg2j5l"></div>'),De=L('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Oe=L('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),qe=L('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Ze(e,t){ae(t,!0);let l=fe(t,"form",15);const i=new Me("(prefers-reduced-motion: reduce)");let o=g(()=>t.data.answers.at(-1)==="xxxxx"),f=g(()=>r(o)?-1:t.data.answers.length),d=g(()=>t.data.guesses[r(f)]||""),m=g(()=>r(d).length===5);const _=g(()=>{let s={},a={};return t.data.answers.forEach((n,u)=>{const y=t.data.guesses[u];for(let h=0;h<5;h+=1){const v=y[h];n[h]==="x"?(s[v]="exact",a[v]="correct"):s[v]||(s[v]=n[h]==="c"?"close":"missing",a[v]=n[h]==="c"?"present":"absent")}}),{classnames:s,description:a}}),C=g(()=>r(_).classnames),D=g(()=>r(_).description);function F(s){s.metaKey||s.key==="Enter"&&!r(m)||document.querySelector(`[data-key="${s.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var U=qe();le("keydown",se,F),de(s=>{var a=Le();oe.title="Sverdle",j(s,a)});var z=E(nt(U),2),x=E(T(z),2);let w;$(x,20,()=>Array.from(Array(6).keys()),s=>s,(s,a)=>{var n=He();const u=g(()=>a===r(f));var y=nt(n),h=T(y);P(y);var v=E(y,2);let S;$(v,20,()=>Array.from(Array(5).keys()),k=>k,(k,O)=>{var A=Ue();const b=g(()=>r(u)?r(d):t.data.guesses[a]),I=g(()=>t.data.answers[a]?.[O]),ut=g(()=>r(b)?.[O]??""),qt=g(()=>r(u)&&O===r(b).length),vt=g(()=>r(I)==="x"),ft=g(()=>r(I)==="c"),pt=g(()=>r(I)==="_");let mt;var yt=T(A),et=E(yt),Jt=T(et);{var Rt=N=>{var rt=Z("(correct)");j(N,rt)},Bt=(N,rt)=>{{var Kt=R=>{var st=Z("(present)");j(R,st)},Gt=(R,st)=>{{var It=B=>{var ot=Z("(absent)");j(B,ot)},Qt=B=>{var ot=Z("empty");j(B,ot)};K(R,B=>{r(pt)?B(It):B(Qt,!1)},st)}};K(N,R=>{r(ft)?R(Kt):R(Gt,!1)},rt)}};K(Jt,N=>{r(vt)?N(Rt):N(Bt,!1)})}P(et);var at=E(et,2);ue(at),P(A),q(N=>{mt=V(A,1,"letter svelte-1pg2j5l",null,mt,N),Q(yt,`${r(ut)??""} `),at.disabled=!r(u),ht(at,r(ut))},[()=>({exact:r(vt),close:r(ft),missing:r(pt),selected:r(qt)})]),j(k,A)}),P(v),q(k=>{Q(h,`Row ${a+1}`),S=V(v,1,"row svelte-1pg2j5l",null,S,k)},[()=>({current:r(u)})]),j(s,n)}),P(x);var J=E(x,2),H=T(J);{var Y=s=>{var a=Ce(),n=nt(a);{var u=v=>{var S=Te(),k=T(S);P(S),q(()=>Q(k,`the answer was "${t.data.answer??""}"`)),j(v,S)};K(n,v=>{!r(o)&&t.data.answer&&v(u)})}var y=E(n,2),h=T(y);P(y),q(()=>Q(h,`${r(o)?"you won :)":"game over :("} play again?`)),j(s,a)},c=s=>{var a=De(),n=T(a);let u;var y=E(n,2);y.__click=[Ft,d,l];var h=E(y,2);$(h,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],v=>v,(v,S)=>{var k=Ne();$(k,21,()=>S,ce,(O,A)=>{var b=Fe();b.__click=[Ft,d,l];var I=T(b,!0);P(b),q(()=>{gt(b,"data-key",r(A)),V(b,1,ve(r(C)[r(A)]),"svelte-1pg2j5l"),b.disabled=r(m),ht(b,r(A)),gt(b,"aria-label",`${r(A)??""} ${(r(D)[r(A)]||"")??""}`),Q(I,r(A))}),j(O,b)}),P(k),j(v,k)}),P(a),q(v=>{n.disabled=!r(m),u=V(n,1,"svelte-1pg2j5l",null,u,v)},[()=>({selected:r(m)})]),j(s,a)};K(H,s=>{r(o)||t.data.answers.length>=6?s(Y):s(c,!1)})}P(J),P(z),_t(z,(s,a)=>_e?.(s,a),()=>()=>({update:s})=>{s({reset:!1})});var p=E(z,2);{var W=s=>{var a=Oe();_t(a,(n,u)=>xe?.(n,u),()=>({particleCount:i.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),j(s,a)};K(p,s=>{r(o)&&s(W)})}q(s=>w=V(x,1,"grid svelte-1pg2j5l",null,w,s),[()=>({playing:!r(o),"bad-guess":l()?.badGuess})]),j(e,U),re()}ie(["click"]);export{Ze as component};
