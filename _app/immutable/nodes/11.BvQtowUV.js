import"../chunks/NZTpNUN0.js";import{e as Yt,u as Dt,r as Ot,am as Zt,aW as Xt,aY as $t,h as r,$ as te,aZ as ee,aG as ae,as as re,f as H,s as L,b as it,t as J,a as w,at as se,a_ as oe,au as ne,c as C,aN as g,d as P,aO as $,j as gt}from"../chunks/CYlQx1xG.js";import{o as ie,d as le,e as ce,a as V}from"../chunks/DcER0RSx.js";import{i as G}from"../chunks/D-N3Gt0C.js";import{e as tt,i as de}from"../chunks/oM2XVRE2.js";import{h as ue}from"../chunks/c-mzsrjd.js";import{s as lt,r as ve,b as _t}from"../chunks/BEa8ETS_.js";import{s as Y,c as fe}from"../chunks/BKNfVhGR.js";import{p as pe}from"../chunks/m9Q1QfxC.js";import{i as me,a as ye,b as be,c as he}from"../chunks/CIIxyVjQ.js";import{b as ge}from"../chunks/BQzEP757.js";function xt(a,t,i){Yt(()=>{var n=Dt(()=>t(a,i?.())||{});if(i&&n?.update){var o=!1,v={};Ot(()=>{var u=i();Zt(u),o&&Xt(v,u)&&(v=u,n.update(u))}),o=!0}if(n?.destroy)return()=>n.destroy()})}function _e(a){let t=0,i=te(0),n;return()=>{$t()&&(r(i),Ot(()=>(t===0&&(n=Dt(()=>a(()=>ee(i)))),t+=1,()=>{ae().then(()=>{t-=1,t===0&&(n?.(),n=void 0)})})))}}function xe(a){const t=JSON.parse(a);return t.data&&(t.data=be(t.data,he.decoders)),t}function ct(a){return HTMLElement.prototype.cloneNode.call(a)}function we(a,t=()=>{}){const i=async({action:o,result:v,reset:u=!0,invalidateAll:m=!0})=>{v.type==="success"&&(u&&HTMLFormElement.prototype.reset.call(a),m&&await me()),(location.origin+location.pathname===o.origin+o.pathname||v.type==="redirect"||v.type==="error")&&await ye(v)};async function n(o){if((o.submitter?.hasAttribute("formmethod")?o.submitter.formMethod:ct(a).method)!=="post")return;o.preventDefault();const u=new URL(o.submitter?.hasAttribute("formaction")?o.submitter.formAction:ct(a).action),m=o.submitter?.hasAttribute("formenctype")?o.submitter.formEnctype:ct(a).enctype,_=new FormData(a),F=o.submitter?.getAttribute("name");F&&_.append(F,o.submitter?.getAttribute("value")??"");const O=new AbortController;let N=!1;const z=await t({action:u,cancel:()=>N=!0,controller:O,formData:_,formElement:a,submitter:o.submitter})??i;if(N)return;let j;try{const y=new Headers({accept:"application/json","x-sveltekit-action":"true"});m!=="multipart/form-data"&&y.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(m)?m:"application/x-www-form-urlencoded");const R=m==="multipart/form-data"?_:new URLSearchParams(_),W=await fetch(u,{method:"POST",headers:y,cache:"no-store",body:R,signal:O.signal});j=xe(await W.text()),j.type==="error"&&(j.status=W.status)}catch(y){if(y?.name==="AbortError")return;j={type:"error",error:y}}await z({action:u,formData:_,formElement:a,update:y=>i({action:u,result:j,reset:y?.reset,invalidateAll:y?.invalidateAll}),result:j})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",n)}}}var wt="mz3PUW_p",kt=["#FFC700","#FF0000","#2E3191","#41BBC7"],jt=3500,At=.5,Pt=150,zt="mix",St=12,Wt="",Et=!0,Mt=800,Lt=1600;function ke(a,t={}){let{colors:i=kt,duration:n=jt,force:o=At,particleCount:v=Pt,particleShape:u=zt,particleSize:m=St,particleClass:_=Wt,destroyAfterDone:F=Et,stageHeight:O=Mt,stageWidth:N=Lt}=t;(function(c){if(document.querySelector("style[data-neoconfetti]"))return;const f=dt("style");f.dataset.neoconfetti="",f.textContent=c,ut(document.head,f)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),a.classList.add("mz3PUW_c"),a.style.setProperty("--sh",O+"px");let T=[],z=[];const j=()=>Z(U()*(Se-1)),y=(c,f)=>u!=="rectangles"&&(c==="circles"||We(f));function R(c,f){const E=j(),M=y(u,E),e=(p,h)=>c.style.setProperty(p,h+"");e("--xlp",vt(et(Ct(f,90)-180),0,180,-N/2,N/2)+"px"),e("--dc",n-Z(1e3*U())+"ms");const s=U()<Ae?I(U()*Pe,2):0;e("--x1",s),e("--x2",-1*s),e("--x3",s),e("--x4",I(et(vt(et(Ct(f,90)-180),0,180,-1,1)),4)),e("--y1",I(U()*Ht,4)),e("--y2",I(U()*o*(qt()?1:-1),4)),e("--y3",Ht),e("--y4",I(ze(vt(et(f-180),0,180,o,-o),0),4)),e("--w",(M?m:Z(4*U())+m/2)+"px"),e("--h",(M?m:Z(2*U())+m)+"px");const l=E.toString(2).padStart(3,"0").split("");e("--hr",l.map(p=>+p/2+"").join(" ")),e("--r",l.join(" ")),e("--rd",I(U()*(je-Ut)+Ut)+"ms"),e("--br",M?"50%":0)}let W;function X(){a.innerHTML="",clearTimeout(W),T=Tt(v,i),z=function(c,f=[],E){const M=[];for(const{color:e}of f){const s=dt("div");s.className=`${wt} ${E}`,s.style.setProperty("--bgc",e);const l=dt("div");ut(s,l),ut(c,s),M.push(s)}return M}(a,T,_);for(const[c,f]of Ft(z))R(f,T[+c].degree);W=setTimeout(()=>{F&&(a.innerHTML="")},n)}return X(),{update(c){const f=c.particleCount??Pt,E=c.particleShape??zt,M=c.particleSize??St,e=c.particleClass??Wt,s=c.colors??kt,l=c.stageHeight??Mt,p=c.duration??jt,h=c.force??At,x=c.stageWidth??Lt,d=c.destroyAfterDone??Et;T=Tt(f,s);let S=!1;if(f===v){z=Array.from(a.querySelectorAll(`.${wt}`));for(const[k,{color:q}]of Ft(T)){const b=z[+k];JSON.stringify(i)!==JSON.stringify(s)&&b.style.setProperty("--bgc",q),E!==u&&b.style.setProperty("--br",y(E,j())?"50%":"0"),e!==_&&(_&&b.classList.remove(_),e&&b.classList.add(e))}}else S=!0;F&&!d&&clearTimeout(W),a.style.setProperty("--sh",l+"px"),n=p,i=s,o=h,v=f,u=E,m=M,_=e,F=d,O=l,N=x,S&&X()},destroy(){a.innerHTML="",clearTimeout(W)}}}var Ut=200,je=800,Ae=.1,Pe=.3,Ht=.5,et=Math.abs,U=Math.random,Z=Math.round,ze=Math.max,dt=a=>document.createElement(a),ut=(a,t)=>a.appendChild(t),Tt=(a,t)=>Array.from({length:a},(i,n)=>({color:t[n%t.length],degree:360*n/a})),I=(a,t=2)=>Z((a+Number.EPSILON)*10**t)/10**t,vt=(a,t,i,n,o)=>(a-t)*(o-n)/(i-t)+n,Ct=(a,t)=>a+t>360?a+t-360:a+t,qt=()=>U()>.5,Ft=Object.entries,Se=6,We=a=>a!==1&&qt();class Ee{#t;#e;constructor(t,i){this.#t=t,this.#e=_e(i)}get current(){return this.#e(),this.#t()}}const Me=/\(.+\)/,Le=new Set(["all","print","screen","and","or","not","only"]);class Ue extends Ee{constructor(t,i){let n=Me.test(t)||t.split(/[\s,]+/).some(v=>Le.has(v.trim()))?t:`(${t})`;const o=window.matchMedia(n);super(()=>o.matches,v=>ie(o,"change",v))}}function Nt(a,t,i){a.preventDefault();const n=a.target.getAttribute("data-key");n==="backspace"?(gt(t,r(t).slice(0,-1)),i()?.badGuess&&i(i().badGuess=!1,!0)):r(t).length<5&&gt(t,r(t)+n)}var He=H('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l"/>'),Te=H('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"/></div>'),Ce=H('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Fe=H('<p class="svelte-1pg2j5l"> </p>'),Ne=H('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),De=H('<button formaction="?/update" name="key"> </button>'),Oe=H('<div class="row svelte-1pg2j5l"></div>'),qe=H('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Je=H('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Re=H('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function ea(a,t){re(t,!0);let i=pe(t,"form",15);const n=new Ue("(prefers-reduced-motion: reduce)");let o=g(()=>t.data.answers.at(-1)==="xxxxx"),v=g(()=>r(o)?-1:t.data.answers.length),u=g(()=>t.data.guesses[r(v)]||""),m=g(()=>r(u).length===5);const _=g(()=>{let e={},s={};return t.data.answers.forEach((l,p)=>{const h=t.data.guesses[p];for(let x=0;x<5;x+=1){const d=h[x];l[x]==="x"?(e[d]="exact",s[d]="correct"):e[d]||(e[d]=l[x]==="c"?"close":"missing",s[d]=l[x]==="c"?"present":"absent")}}),{classnames:e,description:s}}),F=g(()=>r(_).classnames),O=g(()=>r(_).description);function N(e){e.metaKey||e.key==="Enter"&&!r(m)||document.querySelector(`[data-key="${e.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var T=Re();ce("keydown",oe,N),ue(e=>{var s=He();ne.title="Sverdle",w(e,s)});var z=L(it(T),2),j=C(z),y=L(j,2);let R;tt(y,20,()=>Array.from(Array(6).keys()),e=>e,(e,s)=>{var l=Ce();const p=g(()=>s===r(v));var h=it(l),x=C(h);P(h);var d=L(h,2);let S;tt(d,20,()=>Array.from(Array(5).keys()),k=>k,(k,q)=>{var b=Te();const A=g(()=>r(p)?r(u):t.data.guesses[s]),Q=g(()=>t.data.answers[s]?.[q]),ft=g(()=>r(A)?.[q]??""),Jt=g(()=>r(p)&&q===r(A).length),pt=g(()=>r(Q)==="x"),mt=g(()=>r(Q)==="c"),yt=g(()=>r(Q)==="_");let bt;var ht=C(b),at=L(ht),Rt=C(at);{var Bt=D=>{var st=$("(correct)");w(D,st)},Kt=(D,st)=>{{var Gt=B=>{var ot=$("(present)");w(B,ot)},It=(B,ot)=>{{var Qt=K=>{var nt=$("(absent)");w(K,nt)},Vt=K=>{var nt=$("empty");w(K,nt)};G(B,K=>{r(yt)?K(Qt):K(Vt,!1)},ot)}};G(D,B=>{r(mt)?B(Gt):B(It,!1)},st)}};G(Rt,D=>{r(pt)?D(Bt):D(Kt,!1)})}P(at);var rt=L(at,2);ve(rt),P(b),J(D=>{bt=Y(b,1,"letter svelte-1pg2j5l",null,bt,D),V(ht,`${r(ft)??""} `),rt.disabled=!r(p),_t(rt,r(ft))},[()=>({exact:r(pt),close:r(mt),missing:r(yt),selected:r(Jt)})]),w(k,b)}),P(d),J(k=>{V(x,`Row ${s+1}`),S=Y(d,1,"row svelte-1pg2j5l",null,S,k)},[()=>({current:r(p)})]),w(e,l)}),P(y);var W=L(y,2),X=C(W);{var c=e=>{var s=Ne(),l=it(s);{var p=d=>{var S=Fe(),k=C(S);P(S),J(()=>V(k,`the answer was "${t.data.answer??""}"`)),w(d,S)};G(l,d=>{!r(o)&&t.data.answer&&d(p)})}var h=L(l,2),x=C(h);P(h),J(()=>V(x,`${r(o)?"you won :)":"game over :("} play again?`)),w(e,s)},f=e=>{var s=qe(),l=C(s);let p;var h=L(l,2);h.__click=[Nt,u,i];var x=L(h,2);tt(x,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],d=>d,(d,S)=>{var k=Oe();tt(k,21,()=>S,de,(q,b)=>{var A=De();A.__click=[Nt,u,i];var Q=C(A,!0);P(A),J(()=>{lt(A,"data-key",r(b)),Y(A,1,fe(r(F)[r(b)]),"svelte-1pg2j5l"),A.disabled=r(m),_t(A,r(b)),lt(A,"aria-label",`${r(b)??""} ${(r(O)[r(b)]||"")??""}`),V(Q,r(b))}),w(q,A)}),P(k),w(d,k)}),P(s),J(d=>{l.disabled=!r(m),p=Y(l,1,"svelte-1pg2j5l",null,p,d)},[()=>({selected:r(m)})]),w(e,s)};G(X,e=>{r(o)||t.data.answers.length>=6?e(c):e(f,!1)})}P(W),P(z),xt(z,(e,s)=>we?.(e,s),()=>()=>({update:e})=>{e({reset:!1})});var E=L(z,2);{var M=e=>{var s=Je();xt(s,(l,p)=>ke?.(l,p),()=>({particleCount:n.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),w(e,s)};G(E,e=>{r(o)&&e(M)})}J(e=>{lt(j,"href",`${ge??""}/sverdle/how-to-play`),R=Y(y,1,"grid svelte-1pg2j5l",null,R,e)},[()=>({playing:!r(o),"bad-guess":i()?.badGuess})]),w(a,T),se()}le(["click"]);export{ea as component};
