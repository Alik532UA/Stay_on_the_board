import"../chunks/NZTpNUN0.js";import{e as Ve,u as Ne,r as De,T as Xe,aX as Ye,aY as Ze,b as r,av as $e,aZ as et,an as tt,a3 as at,f as L,a9 as W,a4 as ne,a5 as q,a as j,a6 as rt,a_ as st,aa as ot,a7 as T,aN as g,a8 as P,aO as Z,s as be}from"../chunks/CyKPAB5b.js";import{o as nt,d as it,e as lt,a as G}from"../chunks/tS5AOLCa.js";import{i as K}from"../chunks/l-_wPfc8.js";import{e as $,r as ct,b as he,i as dt,s as ge}from"../chunks/Jf2cXy1d.js";import{h as ut}from"../chunks/BDvsOp51.js";import{s as V,c as vt}from"../chunks/acmYPMKL.js";import{p as ft}from"../chunks/_z1SeACa.js";import{i as pt,a as mt,b as yt,c as bt}from"../chunks/9CbfGY4U.js";function _e(t,e,l){Ve(()=>{var i=Ne(()=>e(t,l?.())||{});if(l&&i?.update){var o=!1,f={};De(()=>{var d=l();Xe(d),o&&Ye(f,d)&&(f=d,i.update(d))}),o=!0}if(i?.destroy)return()=>i.destroy()})}function ht(t){let e=0,l=$e(0),i;return()=>{Ze()&&(r(l),De(()=>(e===0&&(i=Ne(()=>t(()=>et(l)))),e+=1,()=>{tt().then(()=>{e-=1,e===0&&(i?.(),i=void 0)})})))}}function gt(t){const e=JSON.parse(t);return e.data&&(e.data=yt(e.data,bt.decoders)),e}function ie(t){return HTMLElement.prototype.cloneNode.call(t)}function _t(t,e=()=>{}){const l=async({action:o,result:f,reset:d=!0,invalidateAll:m=!0})=>{f.type==="success"&&(d&&HTMLFormElement.prototype.reset.call(t),m&&await pt()),(location.origin+location.pathname===o.origin+o.pathname||f.type==="redirect"||f.type==="error")&&await mt(f)};async function i(o){if((o.submitter?.hasAttribute("formmethod")?o.submitter.formMethod:ie(t).method)!=="post")return;o.preventDefault();const d=new URL(o.submitter?.hasAttribute("formaction")?o.submitter.formAction:ie(t).action),m=o.submitter?.hasAttribute("formenctype")?o.submitter.formEnctype:ie(t).enctype,_=new FormData(t),C=o.submitter?.getAttribute("name");C&&_.append(C,o.submitter?.getAttribute("value")??"");const D=new AbortController;let F=!1;const z=await e({action:d,cancel:()=>F=!0,controller:D,formData:_,formElement:t,submitter:o.submitter})??l;if(F)return;let x;try{const w=new Headers({accept:"application/json","x-sveltekit-action":"true"});m!=="multipart/form-data"&&w.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(m)?m:"application/x-www-form-urlencoded");const J=m==="multipart/form-data"?_:new URLSearchParams(_),H=await fetch(d,{method:"POST",headers:w,cache:"no-store",body:J,signal:D.signal});x=gt(await H.text()),x.type==="error"&&(x.status=H.status)}catch(w){if(w?.name==="AbortError")return;x={type:"error",error:w}}await z({action:d,formData:_,formElement:t,update:w=>l({action:d,result:x,reset:w?.reset,invalidateAll:w?.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",i)}}}var xe="mz3PUW_p",we=["#FFC700","#FF0000","#2E3191","#41BBC7"],ke=3500,je=.5,Ae=150,Pe="mix",ze=12,Se="",Ee=!0,We=800,Me=1600;function xt(t,e={}){let{colors:l=we,duration:i=ke,force:o=je,particleCount:f=Ae,particleShape:d=Pe,particleSize:m=ze,particleClass:_=Se,destroyAfterDone:C=Ee,stageHeight:D=We,stageWidth:F=Me}=e;(function(c){if(document.querySelector("style[data-neoconfetti]"))return;const p=le("style");p.dataset.neoconfetti="",p.textContent=c,ce(document.head,p)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",D+"px");let U=[],z=[];const x=()=>X(M()*(Pt-1)),w=(c,p)=>d!=="rectangles"&&(c==="circles"||zt(p));function J(c,p){const E=x(),s=w(d,E),a=(y,h)=>c.style.setProperty(y,h+"");a("--xlp",de(ee(Te(p,90)-180),0,180,-F/2,F/2)+"px"),a("--dc",i-X(1e3*M())+"ms");const n=M()<kt?I(M()*jt,2):0;a("--x1",n),a("--x2",-1*n),a("--x3",n),a("--x4",I(ee(de(ee(Te(p,90)-180),0,180,-1,1)),4)),a("--y1",I(M()*Ue,4)),a("--y2",I(M()*o*(Oe()?1:-1),4)),a("--y3",Ue),a("--y4",I(At(de(ee(p-180),0,180,o,-o),0),4)),a("--w",(s?m:X(4*M())+m/2)+"px"),a("--h",(s?m:X(2*M())+m)+"px");const u=E.toString(2).padStart(3,"0").split("");a("--hr",u.map(y=>+y/2+"").join(" ")),a("--r",u.join(" ")),a("--rd",I(M()*(wt-Le)+Le)+"ms"),a("--br",s?"50%":0)}let H;function Y(){t.innerHTML="",clearTimeout(H),U=He(f,l),z=function(c,p=[],E){const s=[];for(const{color:a}of p){const n=le("div");n.className=`${xe} ${E}`,n.style.setProperty("--bgc",a);const u=le("div");ce(n,u),ce(c,n),s.push(n)}return s}(t,U,_);for(const[c,p]of Ce(z))J(p,U[+c].degree);H=setTimeout(()=>{C&&(t.innerHTML="")},i)}return Y(),{update(c){const p=c.particleCount??Ae,E=c.particleShape??Pe,s=c.particleSize??ze,a=c.particleClass??Se,n=c.colors??we,u=c.stageHeight??We,y=c.duration??ke,h=c.force??je,v=c.stageWidth??Me,S=c.destroyAfterDone??Ee;U=He(p,n);let k=!1;if(p===f){z=Array.from(t.querySelectorAll(`.${xe}`));for(const[O,{color:A}]of Ce(U)){const b=z[+O];JSON.stringify(l)!==JSON.stringify(n)&&b.style.setProperty("--bgc",A),E!==d&&b.style.setProperty("--br",w(E,x())?"50%":"0"),a!==_&&(_&&b.classList.remove(_),a&&b.classList.add(a))}}else k=!0;C&&!S&&clearTimeout(H),t.style.setProperty("--sh",u+"px"),i=y,l=n,o=h,f=p,d=E,m=s,_=a,C=S,D=u,F=v,k&&Y()},destroy(){t.innerHTML="",clearTimeout(H)}}}var Le=200,wt=800,kt=.1,jt=.3,Ue=.5,ee=Math.abs,M=Math.random,X=Math.round,At=Math.max,le=t=>document.createElement(t),ce=(t,e)=>t.appendChild(e),He=(t,e)=>Array.from({length:t},(l,i)=>({color:e[i%e.length],degree:360*i/t})),I=(t,e=2)=>X((t+Number.EPSILON)*10**e)/10**e,de=(t,e,l,i,o)=>(t-e)*(o-i)/(l-e)+i,Te=(t,e)=>t+e>360?t+e-360:t+e,Oe=()=>M()>.5,Ce=Object.entries,Pt=6,zt=t=>t!==1&&Oe();class St{#e;#t;constructor(e,l){this.#e=e,this.#t=ht(l)}get current(){return this.#t(),this.#e()}}const Et=/\(.+\)/,Wt=new Set(["all","print","screen","and","or","not","only"]);class Mt extends St{constructor(e,l){let i=Et.test(e)||e.split(/[\s,]+/).some(f=>Wt.has(f.trim()))?e:`(${e})`;const o=window.matchMedia(i);super(()=>o.matches,f=>nt(o,"change",f))}}function Fe(t,e,l){t.preventDefault();const i=t.target.getAttribute("data-key");i==="backspace"?(be(e,r(e).slice(0,-1)),l()?.badGuess&&l(l().badGuess=!1,!0)):r(e).length<5&&be(e,r(e)+i)}var Lt=L('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l"/>'),Ut=L('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"/></div>'),Ht=L('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Tt=L('<p class="svelte-1pg2j5l"> </p>'),Ct=L('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Ft=L('<button formaction="?/update" name="key"> </button>'),Nt=L('<div class="row svelte-1pg2j5l"></div>'),Dt=L('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Ot=L('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),qt=L('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Yt(t,e){at(e,!0);let l=ft(e,"form",15);const i=new Mt("(prefers-reduced-motion: reduce)");let o=g(()=>e.data.answers.at(-1)==="xxxxx"),f=g(()=>r(o)?-1:e.data.answers.length),d=g(()=>e.data.guesses[r(f)]||""),m=g(()=>r(d).length===5);const _=g(()=>{let s={},a={};return e.data.answers.forEach((n,u)=>{const y=e.data.guesses[u];for(let h=0;h<5;h+=1){const v=y[h];n[h]==="x"?(s[v]="exact",a[v]="correct"):s[v]||(s[v]=n[h]==="c"?"close":"missing",a[v]=n[h]==="c"?"present":"absent")}}),{classnames:s,description:a}}),C=g(()=>r(_).classnames),D=g(()=>r(_).description);function F(s){s.metaKey||s.key==="Enter"&&!r(m)||document.querySelector(`[data-key="${s.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var U=qt();lt("keydown",st,F),ut(s=>{var a=Lt();ot.title="Sverdle",j(s,a)});var z=W(ne(U),2),x=W(T(z),2);let w;$(x,20,()=>Array.from(Array(6).keys()),s=>s,(s,a)=>{var n=Ht();const u=g(()=>a===r(f));var y=ne(n),h=T(y);P(y);var v=W(y,2);let S;$(v,20,()=>Array.from(Array(5).keys()),k=>k,(k,O)=>{var A=Ut();const b=g(()=>r(u)?r(d):e.data.guesses[a]),Q=g(()=>e.data.answers[a]?.[O]),ue=g(()=>r(b)?.[O]??""),qe=g(()=>r(u)&&O===r(b).length),ve=g(()=>r(Q)==="x"),fe=g(()=>r(Q)==="c"),pe=g(()=>r(Q)==="_");let me;var ye=T(A),te=W(ye),Je=T(te);{var Re=N=>{var re=Z("(correct)");j(N,re)},Be=(N,re)=>{{var Ke=R=>{var se=Z("(present)");j(R,se)},Ie=(R,se)=>{{var Qe=B=>{var oe=Z("(absent)");j(B,oe)},Ge=B=>{var oe=Z("empty");j(B,oe)};K(R,B=>{r(pe)?B(Qe):B(Ge,!1)},se)}};K(N,R=>{r(fe)?R(Ke):R(Ie,!1)},re)}};K(Je,N=>{r(ve)?N(Re):N(Be,!1)})}P(te);var ae=W(te,2);ct(ae),P(A),q(N=>{me=V(A,1,"letter svelte-1pg2j5l",null,me,N),G(ye,`${r(ue)??""} `),ae.disabled=!r(u),he(ae,r(ue))},[()=>({exact:r(ve),close:r(fe),missing:r(pe),selected:r(qe)})]),j(k,A)}),P(v),q(k=>{G(h,`Row ${a+1}`),S=V(v,1,"row svelte-1pg2j5l",null,S,k)},[()=>({current:r(u)})]),j(s,n)}),P(x);var J=W(x,2),H=T(J);{var Y=s=>{var a=Ct(),n=ne(a);{var u=v=>{var S=Tt(),k=T(S);P(S),q(()=>G(k,`the answer was "${e.data.answer??""}"`)),j(v,S)};K(n,v=>{!r(o)&&e.data.answer&&v(u)})}var y=W(n,2),h=T(y);P(y),q(()=>G(h,`${r(o)?"you won :)":"game over :("} play again?`)),j(s,a)},c=s=>{var a=Dt(),n=T(a);let u;var y=W(n,2);y.__click=[Fe,d,l];var h=W(y,2);$(h,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],v=>v,(v,S)=>{var k=Nt();$(k,21,()=>S,dt,(O,A)=>{var b=Ft();b.__click=[Fe,d,l];var Q=T(b,!0);P(b),q(()=>{ge(b,"data-key",r(A)),V(b,1,vt(r(C)[r(A)]),"svelte-1pg2j5l"),b.disabled=r(m),he(b,r(A)),ge(b,"aria-label",`${r(A)??""} ${(r(D)[r(A)]||"")??""}`),G(Q,r(A))}),j(O,b)}),P(k),j(v,k)}),P(a),q(v=>{n.disabled=!r(m),u=V(n,1,"svelte-1pg2j5l",null,u,v)},[()=>({selected:r(m)})]),j(s,a)};K(H,s=>{r(o)||e.data.answers.length>=6?s(Y):s(c,!1)})}P(J),P(z),_e(z,(s,a)=>_t?.(s,a),()=>()=>({update:s})=>{s({reset:!1})});var p=W(z,2);{var E=s=>{var a=Ot();_e(a,(n,u)=>xt?.(n,u),()=>({particleCount:i.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),j(s,a)};K(p,s=>{r(o)&&s(E)})}q(s=>w=V(x,1,"grid svelte-1pg2j5l",null,w,s),[()=>({playing:!r(o),"bad-guess":l()?.badGuess})]),j(t,U),rt()}it(["click"]);export{Yt as component};
