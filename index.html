<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title"></title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">
    <style>
        .icon-btn {
            text-decoration: none !important;
        }
    </style>
</head>
<body>
    <div id="top-controls">
        <button id="theme-style-btn" class="icon-btn" title="">
            <span id="theme-style-icon">üåó</span>
        </button>
        <div id="theme-style-dropdown" class="custom-dropdown hidden">
            <div class="dropdown-section">
                <ul id="theme-style-options" class="theme-style-list">
                    <li class="theme-style-row" data-style="classic">
                        <button class="theme-btn light" data-theme="light">‚òÄÔ∏è</button>
                        <span class="theme-style-name">Ubuntu</span>
                        <button class="theme-btn dark" data-theme="dark">üåô</button>
                    </li>
                    <li class="theme-style-row" data-style="peak">
                        <button class="theme-btn light" data-theme="light">‚òÄÔ∏è</button>
                        <span class="theme-style-name">PEAK</span>
                        <button class="theme-btn dark" data-theme="dark">üåô</button>
                    </li>
                    <li class="theme-style-row" data-style="cs2">
                        <button class="theme-btn light" data-theme="light">‚òÄÔ∏è</button>
                        <span class="theme-style-name">CS 2</span>
                        <button class="theme-btn dark" data-theme="dark">üåô</button>
                    </li>
                    <li class="theme-style-row" data-style="glass">
                        <button class="theme-btn light" data-theme="light">‚òÄÔ∏è</button>
                        <span class="theme-style-name">Glassmorphism</span>
                        <button class="theme-btn dark" data-theme="dark">üåô</button>
                    </li>
                    <li class="theme-style-row" data-style="material">
                        <button class="theme-btn light" data-theme="light">‚òÄÔ∏è</button>
                        <span class="theme-style-name">Material You</span>
                        <button class="theme-btn dark" data-theme="dark">üåô</button>
                    </li>
                </ul>
            </div>
        </div>
        <button id="lang-btn" class="icon-btn" title="">
            <span id="lang-flag"></span>
        </button>
        <div id="lang-dropdown" class="custom-dropdown hidden">
            <ul id="lang-options" class="lang-dropdown-list">
                <li class="lang-option" data-lang="uk"><span class="flag flag-uk"></span></li>
                <li class="lang-option" data-lang="en"><span class="flag flag-en"></span></li>
                <li class="lang-option" data-lang="crh"><span class="flag flag-crh"></span></li>
                <li class="lang-option" data-lang="nl"><span class="flag flag-nl"></span></li>
            </ul>
        </div>
        
        <a href="https://send.monobank.ua/jar/8TPmFKQTCK/" target="_blank"  id="donate-btn" class="icon-btn" title="">
            <span>üí∞</span>
        </a>
        <script>
        // –î–∏–Ω–∞–º—ñ—á–Ω–æ –∑–º—ñ–Ω—é—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è donate-btn –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø—Ä–∏—Å—Ç—Ä–æ—é
        (function() {
            var btn = document.getElementById('donate-btn');
            if (!btn) return;
            var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            btn.href = isMobile
                ? 'https://send.monobank.ua/jar/8TPmFKQTCK'
                : 'https://send.monobank.ua/jar/8TPmFKQTCK/';
        })();
        </script>
    </div>
    
    <div id="game-container">
        <header>
            <h1 id="game-title" style="text-align: center;"></h1>
        </header>
        <div id="game-board">
            <!-- –ö–ª—ñ—Ç–∏–Ω–∫–∏ –¥–æ—à–∫–∏ –±—É–¥—É—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —Ç—É—Ç -->
        </div>
        <div id="show-moves-checkbox-wrapper">
            <label for="show-moves-checkbox" id="show-moves-label">
                <span id="show-moves-text"></span>
                <span class="ios-switch">
                    <input type="checkbox" id="show-moves-checkbox">
                    <span class="slider"></span>
                </span>
            </label>
        </div>
        <div id="board-options">
            <label for="show-board-checkbox" id="show-board-label">
                <span id="show-board-text"></span>
                <span class="ios-switch">
                    <input type="checkbox" id="show-board-checkbox" checked>
                    <span class="slider"></span>
                </span>
            </label>
            <label for="blocked-mode-checkbox" id="blocked-mode-label">
                <span id="blocked-mode-text"></span>
                <span class="ios-switch">
                    <input type="checkbox" id="blocked-mode-checkbox">
                    <span class="slider"></span>
                </span>
            </label>
            <div class="speech-controls-container">
                <label for="speech-enabled-checkbox" id="speech-enabled-label">
                    <span id="speech-enabled-text"></span>
                    <span class="ios-switch">
                        <input type="checkbox" id="speech-enabled-checkbox">
                        <span class="slider"></span>
                    </span>
                </label>
                <button id="voice-settings-toggle" title="">
                    ‚öôÔ∏è
                </button>
            </div>
            <div id="voice-settings">
                <h4 id="voice-settings-title"></h4>
                <div id="voice-selectors">
                    <!-- –°–µ–ª–µ–∫—Ç–æ—Ä–∏ –≥–æ–ª–æ—Å—ñ–≤ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —Ç—É—Ç -->
                </div>
            </div>
        </div>
        <div id="visual-controls" class="hidden">
            <div id="player1-glow" class="player-glow"></div>
            <div id="player2-glow" class="player-glow"></div>
            <div id="direction-grid">
                <button class="control-btn" id="dir-7" data-direction="7">‚Üñ</button>
                <button class="control-btn" id="dir-8" data-direction="8">‚Üë</button>
                <button class="control-btn" id="dir-9" data-direction="9">‚Üó</button>
                <button class="control-btn" id="dir-4" data-direction="4">‚Üê</button>
                <div id="computer-move-display"></div>
                <button class="control-btn" id="dir-6" data-direction="6">‚Üí</button>
                <button class="control-btn" id="dir-1" data-direction="1">‚Üô</button>
                <button class="control-btn" id="dir-2" data-direction="2">‚Üì</button>
                <button class="control-btn" id="dir-3" data-direction="3">‚Üò</button>
            </div>
            <p class="controls-label" id="select-distance-label"></p>
            <div id="distance-selector">
                <!-- –ö–Ω–æ–ø–∫–∏ –≤—ñ–¥—Å—Ç–∞–Ω—ñ –±—É–¥—É—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —Ç—É—Ç -->
            </div>
            <button id="confirm-move-btn"></button>
            <button id="no-moves-btn"></button>
        </div>
        <p id="message-area"></p>
        <div class="score-panel">
            <span id="score-label"></span>
            <span class="online-users" id="online-label"><span id="online-icon">üë•</span> <span id="online-text"></span><span id="online-count">1</span></span>
        </div>
        <!-- –í—Å–µ —ñ–Ω—à–µ, —â–æ –±—É–ª–æ —É game-container, –∑–∞–ª–∏—à–∞—î–º–æ –Ω–∏–∂—á–µ -->
        <div id="ui-panel" style="display:none"><!-- –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ, —â–æ–± –Ω–µ –¥—É–±–ª—é–≤–∞—Ç–∏ message-area —Ç–∞ visual-controls --></div>
        <div id="online-game-panel" class="hidden"><!-- –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ —É visual-controls --></div>
        <button id="menu-btn" class="icon-btn" title="" aria-label="" style="position: absolute; left: 50%; transform: translateX(-50%); top: 0px; z-index: 10;">
            üè†
        </button>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ -->
    <div id="modal-overlay" class="visible">
        <div id="modal-content">
            <h2 id="modal-title">Menu</h2>
            <div id="modal-body"></div>
            <div class="modal-footer"></div>
        </div>
    </div>

    <script type="module">
      import uk from './lang/uk.js';
      import en from './lang/en.js';
      import crh from './lang/crh.js';
      import nl from './lang/nl.js';
      window.translationsAll = { uk, en, crh, nl };
      window.translations = window.translationsAll[localStorage.getItem('lang') || 'uk'];
      // –î–∏–Ω–∞–º—ñ—á–Ω–æ –æ–Ω–æ–≤–ª—é—î–º–æ –≤—Å—ñ —Ç–µ–∫—Å—Ç–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ –º–æ–≤–∏
      function updateLocalizedTexts() {
        const t = window.translations;
        document.getElementById('game-title').textContent = t.mainMenu.gameTitle;
        document.getElementById('page-title').textContent = t.mainMenu.gameTitle;
        document.getElementById('theme-style-btn').title = t.topControls.themeStyle;
        document.getElementById('lang-btn').title = t.topControls.language;
        document.getElementById('donate-btn').title = t.topControls.donate;
        document.getElementById('show-moves-text').textContent = t.board.showMoves;
        document.getElementById('show-board-text').textContent = t.board.showBoard;
        document.getElementById('blocked-mode-text').textContent = t.board.blockedMode;
        document.getElementById('speech-enabled-text').textContent = t.board.speechEnabled;
        document.getElementById('voice-settings-toggle').title = t.board.voiceSettings;
        document.getElementById('voice-settings-title').textContent = t.board.voiceSettingsTitle;
        document.getElementById('computer-move-display').innerHTML = t.visual.computerMove;
        document.getElementById('select-distance-label').textContent = t.visual.selectDistance;
        document.getElementById('confirm-move-btn').textContent = t.visual.confirmMove;
        document.getElementById('no-moves-btn').textContent = t.visual.noMoves;
        document.getElementById('message-area').textContent = t.mainMenu.welcome;
        document.getElementById('score-label').textContent = t.scorePanel.score + ': ';
        document.getElementById('online-label').title = t.scorePanel.online;
        document.getElementById('online-text').textContent = t.scorePanel.online + ': ';
        document.getElementById('menu-btn').title = t.menu.exit;
        document.getElementById('menu-btn').ariaLabel = t.menu.exit;
        document.getElementById('modal-title').textContent = t.menu.menuTitle;
      }
      window.updateLocalizedTexts = updateLocalizedTexts;
      updateLocalizedTexts();
    </script>
    <script type="module" src="js/game.js"></script>
</body>
</html>